<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8">
  <title>üì¶ Instal¬∑laci√≥ PostgreSQL</title>
  <link rel="stylesheet" href="estilsunitats.css">
  <link rel="stylesheet" href="https://cdn.hugeicons.com/font/hgi-stroke-rounded.css" />
</head>
<body>

<header>
  <a href="./">
    
    <img src="imgs/ASGBD.png" alt="M√≤dul ASGBD">
  </a>
  <h1>ASGBD   -    Instal¬∑laci√≥ PostgreSQL 
    <img src="imgs/Postgresql_elephant.svg" alt="PostgreSQL Logo" style="width: 40px; ">
  </h1>
</header>

<nav>
  <h3>√çndex</h3>
  <a href="#intro">Introducci√≥</a>
  <a href="#versions">Versions</a>
  <a href="#edicions">Edicions</a>
  <a href="#requisits">Requisits</a>
  <a href="#instancia">Inst√†ncia</a>
  <a href="#arquitectura">Arquitectura</a>
  <a href="#estruc">Estructura carpetes</a>
  <a href="#instalacio">Instal¬∑laci√≥ PostgreSQL</a>
  <a href="#acces">Acc√©s a PostgreSQL</a>
  <!--<a href="#altres-recursos">Altres Recursos</a>-->
</nav>

<main>
  <section id="intro">
    <h1>Instal¬∑laci√≥ d'un SGBD</h1> <hr>
    <h2>Definicions</h2>

    <h3>Qu√® √©s un DBA</h3>
    <p>
        La figura del DBA fa refer√®ncia a la persona o a l‚Äôequip de persones responsables d‚Äôassegurar 
        la disponibilitat de les dades d‚Äôuna organitzaci√≥ i l‚Äôacc√©s a les mateixes de manera √≤ptima.
         Ser√† el responsable de tot el cicle de vida del sistema d‚Äôinformaci√≥.
    </p>

    <h4><u>Tasques d‚Äôun DBA</u></h4>
    <ul>
        <li>Configurar el maquinari on s‚Äôinstal¬∑lar√† el SGBD</li>
        <li>Configurar el sistema operatiu</li>
        <li>Instal¬∑lar i mantindre el SGBD</li>
        <li>Crear i configurar bases de dades</li>
        <li>Control d‚Äôusuaris i permisos</li>
        <li>Gesti√≥ de la seguretat</li>
        <li>Monitorar i optimitzar el rendiment de les bases de dades</li>
        <li>Realitzar tasques de c√≤pies de seguretat i recuperaci√≥</li>
    </ul>

    <h3>Qu√® √©s un SGBD</h3>
    <p>
        Un SGBD √©s un conjunt de programes que permeten l‚Äôemmagatzematge, modificaci√≥ i extracci√≥ de la informaci√≥ d‚Äôuna base de dades, a m√©s de proporcionar ferramentes per a explotar, administrar i gestionar les bases de dades. 
    </p>
    <p>
        En angl√©s DBMS o RDBMS (Data Base Management System).
    </p>

    <p><strong>Ranking DBMS:</strong> <a href="https://db-engines.com/en/ranking" target="_blank">https://db-engines.com/en/ranking</a></p>
    <p>Contesta a les preguntes ...</p>
    <div class="preg"><ul >
        <li>Quants SGBD hi ha al r√†nquing</li>
        <li>Dels 5 primers, quants s√≥n de codi obert</li>
        <li>Els dos primers, a quina empresa pertanyen</li>
        <li>Dels 7 primers, quins sistemes operatius suporten (fes una graella o taula)</li>
        <li>Dels 7 primers, quins models de dades suporten (fes una graella o taula)</li>
    </ul></div>
 <hr>

    <h2>Classificacions dels SGBD</h2>
    <p>
        Les classificacions dels Sistemes de Gesti√≥ de Bases de Dades (SGBD) poden organitzar-se en diverses categories segons la seua arquitectura, nombre d‚Äôusuaris, model de dades i el seu prop√≤sit o tipus de c√†rrega de treball.
    </p>

    <h3>1. Segons el nombre d‚Äôusuaris</h3>
    <ul>
        <li><strong>Monousuari</strong>
            <ul>
                <li>Dissenyats per a ser utilitzats per un √∫nic usuari alhora.</li>
                <li>Exemple: Microsoft Access (en entorns personals o d‚Äôescriptori).</li>
            </ul>
        </li>
        <li><strong>Multiusuari</strong>
            <ul>
                <li>Permeten que m√∫ltiples usuaris accedisquen i treballen simult√†niament amb la base de dades.</li>
                <li>Controlen l‚Äôacc√©s concurrent i la integritat de les dades.</li>
                <li>Exemples: MySQL, PostgreSQL, Oracle Database, SQL Server.</li>
            </ul>
        </li>
    </ul>

    <h3>2. Segons la seua arquitectura</h3>
    <ul>
        <li><strong>Centralitzats</strong>
            <ul>
                <li>Tota la base de dades s‚Äôemmagatzema i gestiona en un √∫nic servidor.</li>
                <li>Els usuaris accedeixen al SGBD a trav√©s d‚Äôuna xarxa, per√≤ tot el processament ocorre al servidor central.</li>
                <li>M√©s f√†cils de mantindre, per√≤ poden ser un coll de botella i un punt √∫nic de fallada.</li>
            </ul>
        </li>
        <li><strong>Distribu√Øts</strong>
            <ul>
                <li>La base de dades est√† repartida en m√∫ltiples nodes (servidors).</li>
                <li>Les dades poden estar replicades o fragmentades entre diferents ubicacions.</li>
                <li>M√©s complexos, per√≤ ofereixen major disponibilitat i escalabilitat.</li>
            </ul>
        </li>
    </ul>

    <h3>3. Segons el model de dades (o tipus de base de dades)</h3>
    <p>Aquests SGBD es classifiquen segons la forma en qu√® estructuren i accedeixen a les dades:</p>
    <ul>
        <li><strong>Relacionals</strong>
            <ul>
                <li>Basats en taules amb files i columnes.</li>
                <li>Estructura fixa (esquema definit).</li>
                <li>Usen SQL.</li>
                <li>Exemples: MySQL, PostgreSQL, Oracle.</li>
            </ul>
        </li>
        <li><strong>Documentals</strong>
            <ul>
                <li>Emmagatzemen dades en forma de documents (normalment JSON, BSON, etc.).</li>
                <li>Flexibles, ideals per a dades semi-estructurades.</li>
                <li>Exemples: MongoDB, CouchDB. S√≥n part de NoSQL.</li>
            </ul>
        </li>
        <li><strong>De grafs</strong>
            <ul>
                <li>Optimitzats per a representar relacions complexes entre dades.</li>
                <li>Les dades s‚Äôemmagatzemen com a nodes i arestes.</li>
                <li>Exemples: Neo4j, ArangoDB. Tamb√© considerats NoSQL.</li>
            </ul>
        </li>
        <li><strong>In-memory</strong>
            <ul>
                <li>Emmagatzemen les dades directament en la mem√≤ria RAM per a m√†xima velocitat.</li>
                <li>Usats en temps real, mem√≤ries cau o aplicacions cr√≠tiques.</li>
                <li>Exemples: Redis, SAP HANA.</li>
            </ul>
        </li>
        <li><strong>De s√®ries temporals</strong>
            <ul>
                <li>Especialitzats en gestionar dades amb marques temporals (m√®triques, logs, sensors).</li>
                <li>Optimitzats per a inserir, consultar i analitzar dades cronol√≤giques.</li>
                <li>Exemples: InfluxDB, TimescaleDB.</li>
            </ul>
        </li>
        <li><strong>Espacials</strong>
            <ul>
                <li>Dissenyats per a emmagatzemar i consultar dades geogr√†fiques i geom√®triques.</li>
                <li>Suporten operacions com intersecci√≥ de pol√≠gons, dist√†ncies, coordenades.</li>
                <li>Exemples: PostGIS (extensi√≥ de PostgreSQL), Oracle Spatial, MongoDB (suport geoespacial).</li>
            </ul>
        </li>
        <li><strong>Altres models cl√†ssics</strong>
            <ul>
                <li><em>Navegacionals</em>: Organitzats en arbres o xarxes jer√†rquiques.</li>
                <li><em>Orientats a objectes</em>: Emmagatzemen objectes complets.</li>
            </ul>
        </li>
    </ul>

    <p><strong>Notes importants:</strong></p>
    <ul>
        <li>Alguns SGBD combinen m√∫ltiples models (per exemple, ArangoDB combina grafs, documents i claus-valor).</li>
        <li>Molts motors relacionals moderns ofereixen extensions per a models no relacionals, com PostgreSQL amb PostGIS (espacial) o TimescaleDB (s√®ries temporals).</li>
    </ul>

    <h3>4. Segons el prop√≤sit o tipus de c√†rrega de treball</h3>
    <ul>
        <li><strong>OLTP (Online Transaction Processing) ‚Äì Transaccionals</strong>
            <ul>
                <li>Dissenyats per a gestionar moltes transaccions r√†pides i concurrents.</li>
                <li>Usats en sistemes operacionals: vendes, bancs, reserves, etc.</li>
                <li>Requereixen alta integritat, concurr√®ncia i recuperaci√≥ davant fallades.</li>
                <li>Exemples: MySQL, PostgreSQL, Oracle, SQL Server.</li>
            </ul>
        </li>
        <li><strong>OLAP (Online Analytical Processing) ‚Äì Anal√≠tics / Data Warehouse</strong>
            <ul>
                <li>Optimitzats per a consultes complexes i an√†lisi de grans volums de dades.</li>
                <li>Suporten operacions com agregaci√≥, slicing, dicing, drill-down.</li>
                <li>Usats en intel¬∑lig√®ncia de negoci, informes, dashboards.</li>
                <li>Exemples: Amazon Redshift, Snowflake, Google BigQuery, Microsoft Synapse, Teradata.</li>
            </ul>
        </li>
    </ul>
    <p>Alguns SGBD moderns (com PostgreSQL o SQL Server) poden realitzar funcions OLTP i OLAP h√≠brides, encara que no tan especialitzades com les eines pures.</p>

    <h2>Tipus de connexi√≥ a una Base de Dades</h2>

    <h3>1. Des de consola (CLI - Command Line Interface)</h3>
    <ul>
        <li><strong>In situ</strong>
            <ul>
                <li>Connexi√≥ local, des del mateix equip on est√† la base de dades.</li>
                <li>Exemples:<br>
                    <code>sqlplus usuari/pass@host/nombasedades</code>
                    <code>mysql -u usuari -p</code><br>
                    <code>psql -U usuari -d basedades</code>
                </li>
            </ul>
        </li>
        <li><strong>Per SSH (Secure Shell)</strong>
            <ul>
                <li>Connexi√≥ remota i segura a trav√©s d‚Äôun t√∫nel SSH al servidor on est√† la BD.</li>
                <li>√ötil per a mantindre la seguretat en entorns productius.</li>
                <li>Exemples:<br>
                    <code>ssh usuari@servidor</code><br>
                    <code>mysql -u usuari -p</code>
                </li>
            </ul>
        </li>
    </ul>

    <h3>2. Des d‚Äôun entorn gr√†fic (GUI - Graphical User Interface)</h3>
    <p>Ferramentes visuals que permeten gestionar bases de dades de manera amigable:</p>
    <ul>
        <li>Interf√≠cie intu√Øtiva, ideal per a usuaris no t√®cnics o per a tasques r√†pides.</li>
        <li>Exemples:
            <ul>
                <li>pgadmin</li>
                <li>DBeaver</li>
                <li>phpMyAdmin</li>
            </ul>
        </li>
    </ul>

    <h3>3. Des d‚Äôun llenguatge de programaci√≥ (via driver o API)</h3>
    <p>Connexi√≥ programada des d‚Äôuna aplicaci√≥ o script.</p>
    <ul>
        <li><strong>PDO (PHP Data Objects)</strong>
            <ul>
                <li>Abstracci√≥ d‚Äôacc√©s a base de dades en PHP.</li>
                <li>Suporta m√∫ltiples motors (MySQL, SQLite, PostgreSQL, etc.).</li>
                <li>Exemple:<br>
                    <code>$pdo = new PDO("mysql:host=localhost;dbname=mi_bd", "usuari", "contrasenya");</code>
                </li>
            </ul>
        </li>
        <li><strong>Altres drivers per llenguatge</strong>
            <ul>
                <li>JDBC (Java)</li>
                <li>ODBC (multiplataforma)</li>
                <li>psycopg2 (Python per a PostgreSQL)</li>
                <li>SQLAlchemy (ORM per a Python)</li>
                <li>etc...</li>
            </ul>
        </li>
    </ul>

    <h2>Funcions d‚Äôun SGBD</h2>
<ul>
    <li><strong>DDL (Data Definition Language)</strong>: <code>CREATE</code>, <code>ALTER</code>, <code>DROP</code>, <code>TRUNCATE</code>, <code>COMMENT</code>, <code>RENAME</code></li>
    <li><strong>DML (Data Manipulation Language)</strong>: <code>INSERT</code>, <code>DELETE</code>, <code>UPDATE</code>, <code>SELECT</code>
        <br>‚Ü≥ <strong>DQL (Data Query Language)</strong>: <code>SELECT</code>
    </li>
    <li><strong>DCL (Data Control Language)</strong>: <code>GRANT</code>, <code>REVOKE</code></li>
    <li><strong>TCL (Transaction Control Language)</strong>: <code>COMMIT</code>, <code>ROLLBACK</code>, <code>SAVEPOINT</code></li>
    <li><strong>Integritat referencial</strong>: Garantir la coher√®ncia entre taules relacionades (claus foranes, depend√®ncies, etc.).</li>
    <li><strong>Auditoria</strong>: Registrar qui accedeix o modifica dades, i quan ho fa.</li>
    <li><strong>Temps de resposta idoni</strong>: Proporcionar respostes r√†pides i eficients a consultes i operacions.</li>
    <li><strong>Independ√®ncia f√≠sica i l√≤gica</strong>: Separar la manera com es veuen les dades de com estan emmagatzemades internament.</li>
    <li><strong>Monitoratge del SGBD</strong>: Supervisar el rendiment, √∫s de recursos, sessions, etc.</li>
    <li><strong>Connectivitat</strong>: Permetre acc√©s des de diferents aplicacions, sistemes operatius i ubicacions.</li>
    <li><strong>C√≤pia i recuperaci√≥</strong>: Fer c√≤pies de seguretat i restaurar-les en cas de fallada o p√®rdua de dades.</li>
</ul>

<h2>Elements d‚Äôun SGBD</h2>
<p>Un Sistema Gestor de Bases de Dades (SGBD) est√† compost per diversos elements o components que treballen conjuntament per facilitar l‚Äôemmagatzematge, recuperaci√≥, manipulaci√≥ i administraci√≥ de dades.</p>

<h3>1. Processador de consultes</h3>
<p>√âs el component encarregat d‚Äôinterpretar i executar les consultes realitzades pels usuaris (normalment en SQL). Les seues funcions inclouen:</p>
<ul>
    <li>An√†lisi l√®xica i sint√†ctica de les consultes.</li>
    <li>Optimitzaci√≥ de consultes per millorar-ne el rendiment.</li>
    <li>Generaci√≥ del pla d‚Äôexecuci√≥.</li>
</ul>

<h3>2. Gestor de la base de dades</h3>
<p>√âs el nucli del SGBD. Controla l‚Äôacc√©s a les dades i garanteix la seua integritat, seguretat i concurr√®ncia. Les seues responsabilitats s√≥n:</p>
<ul>
    <li>Control de transaccions.</li>
    <li>Gesti√≥ de la concurr√®ncia (acc√©s simultani).</li>
    <li>Recuperaci√≥ davant de fallades.</li>
    <li>Control d‚Äôintegritat.</li>
</ul>

<h3>3. Gestor d‚Äôarxius</h3>
<p>Aquest component administra l‚Äôemmagatzematge f√≠sic de les dades en disc. Entre les seues funcions estan:</p>
<ul>
    <li>Lectura i escriptura de blocs de dades.</li>
    <li>Organitzaci√≥ i emmagatzematge eficient.</li>
    <li>Manteniment d‚Äô√≠ndexs i estructures d‚Äôemmagatzematge.</li>
</ul>

<h3>4. Interf√≠cies externes</h3>
<p>S√≥n els mecanismes que permeten als usuaris i aplicacions comunicar-se amb el SGBD. Poden incloure:</p>
<ul>
    <li>Interf√≠cies gr√†fiques (GUI).</li>
    <li>Interf√≠cies de programaci√≥ (API).</li>
    <li>Consoles de comandes.</li>
    <li>Connectors per a llenguatges de programaci√≥.</li>
</ul>

<h3>5. Preprocessador del llenguatge de manipulaci√≥ de dades (DML)</h3>
<p>Aquest component s‚Äôencarrega d‚Äôidentificar les sent√®ncies DML (com <code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>) dins del codi font d‚Äôuna aplicaci√≥. Funcions clau:</p>
<ul>
    <li>Integrar sent√®ncies DML en llenguatges com C, Java, etc.</li>
    <li>Traduir-les a crides al processador de consultes del SGBD.</li>
</ul>

<h3>6. Compilador del llenguatge de definici√≥ de dades (DDL)</h3>
<p>Tradu√Øx les sent√®ncies DDL (com <code>CREATE</code>, <code>ALTER</code>, <code>DROP</code>) que definixen l‚Äôestructura de la base de dades. La seua funci√≥ √©s:</p>
<ul>
    <li>Processar les definicions d‚Äôesquemes, taules, √≠ndexs, vistes, etc.</li>
    <li>Actualitzar el diccionari de dades amb aquesta informaci√≥.</li>
</ul>

<h3>7. Gestor del diccionari</h3>
<p>El diccionari (o cat√†leg) de dades √©s una base de dades interna que emmagatzema metadades. Aquest gestor:</p>
<ul>
    <li>Administra el diccionari de dades.</li>
    <li>Proporciona informaci√≥ sobre les estructures, restriccions, usuaris i permisos.</li>
    <li>√âs consultat per quasi tots els altres components del SGBD.</li>
</ul>
<hr>

<h2>Com seleccionar un SGBD</h2>
<p>Una vegada es coneixen els elements d‚Äôun SGBD, els tipus de SGBD i els conceptes clau, ja s‚Äôest√† en posici√≥ de poder triar un SGBD tenint en compte els factors que determinaran l‚Äôelecci√≥.</p>

<h3>Factors per a l‚Äôelecci√≥ del SGBD</h3>
<ul>
    <li>Tipus de dades a tractar</li>
    <li>Volum de dades</li>
    <li>Nombre d‚Äôusuaris i necessitat de concurr√®ncia</li>
    <li>Tipus de consultes</li>
    <li>Cost (compra i manteniment), llic√®ncies</li>
    <li>Velocitat de lectura/escriptura</li>
    <li>Arquitectura i connectivitat (escalabilitat)</li>
    <li>Recursos i pol√≠tica de l‚Äôempresa</li>
    <li>Seguretat (compliment normatiu ‚Äì <em>compliance</em>)</li>
    <li>Requisits del sistema
        <ul>
            <li>Integraci√≥ amb altres aplicacions</li>
            <li>APIs</li>
            <li>Migraci√≥ de dades</li>
        </ul>
    </li>
    <li>Tipologia de la base de dades (relacional, NoSQL, etc.)</li>
    <li>Experi√®ncia de l‚Äôequip (comunitat, documentaci√≥ disponible)</li>
    <li>Suport t√®cnic</li>
    <li>Actualitzacions del producte</li>
</ul>

<h2>Documentaci√≥</h2>
<p>En cada instal¬∑laci√≥ s‚Äôhaur√† d‚Äôelaborar o omplir una documentaci√≥ amb la informaci√≥ seg√ºent. Aquesta documentaci√≥ <strong>no ser√† p√∫blica</strong> i es guardar√† per a consultes t√®cniques.</p>

<ul>
    <li>Nom i contacte de la persona instal¬∑ladora</li>
    <li>Data de la instal¬∑laci√≥</li>
    <li>M√†quina, IP, DNS, port(s)</li>
    <li>Caracter√≠stiques de la m√†quina</li>
    <li>Com accedir a la m√†quina (f√≠sica, virtual, n√∫vol)</li>
    <li>Sistema Operatiu / versi√≥</li>
    <li>Usuari administrador del sistema operatiu</li>
    <li>Usuari que realitza la instal¬∑laci√≥</li>
    <li>Producte i versi√≥ utilitzada del SGBD</li>
    <li>Llocs/carpetes on s‚Äôinstal¬∑la el producte</li>
    <li>Llocs/carpetes on s‚Äôinstal¬∑la la base de dades</li>
    <li>Llocs/carpetes on estan els fitxers rellevants</li>
    <li>Noms de les bases de dades (CDB, PDBs, ...)</li>
    <li>... i qualsevol altra informaci√≥ que es considere rellevant</li>
</ul>
<hr>
<h2>Verificar els requisits d‚Äôinstal¬∑laci√≥</h2>
<p>En cada SGBD hi haur√† uns requisits que podem trobar en la documentaci√≥ de cada versi√≥ del producte concret ... ORACLE, PostgreSQL, MySQL, etc.</p>
<p>Abans de comen√ßar la instal¬∑laci√≥, cal aconseguir i tindre disponibles aquests documents!</p>
<p><strong>Verificar:</strong></p>
<ul>
    <li>Requisits de hardware</li>
    <li>Kernel del sistema operatiu adequat</li>
    <li>Comunicacions</li>
    <li>Espai lliure (mem√≤ria i emmagatzematge)</li>
    <li>Exist√®ncia de paquets i versions</li>
    <li>Variables d‚Äôentorn</li>
    <li>Usuaris</li>
</ul>

<h2>Registre de la instal¬∑laci√≥ (log de la instal¬∑laci√≥)</h2>
<p>Tots els instal¬∑ladors de sistemes gestors de bases de dades guarden un registre de les operacions 
  realitzades durant la instal¬∑laci√≥. Aquest registre √©s √∫til en cas que es produeixi algun problema, 
  per a diagnosticar-ne el motiu.</p>
<p>L‚Äôestructura i ubicaci√≥ del registre de la instal¬∑laci√≥ dependr√† del SGBD.</p>
<h4>El DBA deu tindre localitzat este registre per poder consultar-lo en qualsevol moment i trobar incid√®ncies en cas d'haver-se produ√Øt</h4>


  </section>


    <section id="versions">
    <h2>Versions de PostgreSQL </h2>
  
    <h3>üßæ Qu√® √©s una versi√≥?</h3>
    <p>
      La <strong>versi√≥</strong> refer√®ncia a la numeraci√≥ del programari que indica les funcionalitats disponibles, el motor de base de dades i el model d‚Äôarquitectura utilitzat.
      Exemples: <code>9.6</code>, <code>10</code>, <code>11</code>, <code>15</code>, <code>16</code>
    </p>
    <p>Estes s√≥n les versions majors. Cada versi√≥: Introdueix canvis importants, T√© 5 anys de support oficial, Requereix de dump/restore per actualitzar </p>
    <p>Hi ha versions menors. Exemple 15.2 ‚Üí 15.3 . Estes versions: Correcci√≥ de bugs, actualitzacions de seguretat, No trenquen compatibilitat, S'actualitzen facilment.</p>

   

   
    <h3>‚ö†Ô∏è Consideracions importants</h3>
    <ul>
      <li>Tamb√© es molt important tindre en consideraci√≥ el fi de suport d'una versi√≥ (EOL, End of Life)</li>
    </ul>
  <p>El  Fi de vida √∫til, m√©s conegut pel seu terme angl√®s End Of Life (EOL), √©s un terme que fa refer√®ncia a 
    la caducitat d'un producte de programari. √âs a dir, √©s el moment en qu√® un programari deixa de tenir 
    manteniment i suport.</p>

    <div class="preg">
   
    </div>
  </section>



  
  <section id="edicions">
    <h2>Edicions de Postgresql</h2>
      <p>       Postgres NO T√â EDICIONS, tipus Enterprise, Standard, etc,  com fa ORACLE..    </p>
      <p>En Postgress sempre √©s el mateix motor, sense funcions ‚Äúcapades‚Äù per llic√®ncia.</p>

    <ul> El que si que canvia, √©s:
        <li>Extensions:(PostGIS, pg_stat_statements, etc.) </li>
        <li>Distribucions:(EnterpriseDB, Amazon RDS, Azure, etc.) </li>
        <li>Configuraci√≥ i suport comercial</li>
    </ul>

    <p class="tips">(Practica üß™) <a href="https://github.com/EnriqueIborra/ASGBD/blob/b7846aed55ae7885701f8d88a42091aae52dfe0c/UD1/desplegar%20ORACLEdb23%20sobre%20Docker_simplif.pdf" target="_blank">
       Primer contacte amb Postgresql </a></p>
    
</section>

  


  
  <section id="requisits">
    <h2>Requisits d‚Äôinstal¬∑laci√≥</h2>
      
    <ul> <strong>Sistema Operatiu</strong>
        <li>GNU/Linux (Ubuntu, Debian, Red Hat, CentOS, AlmaLinux, etc.)</li>
        <li>Windows</li>
        <li>macOS</li>
        <li>Sistemes Unix (FreeBSD, OpenBSD‚Ä¶)</li>
    </ul>
 
 <ul> <strong>Maquinari m√≠nims</strong>
     <li>CPU: 1 nucli</li>
     <li>Mem√≤ria RAM: 1 GB (2 GB o m√©s recomanat)</li>
     <li>Disc dur: Uns 100 MB per al programari. Espai addicional segons les dades i c√≤pies de seguretat</li>
 </ul>

 <ul> <strong>Programari necessari</strong>
    <li>En Linux, gestor de paquets (apt, dnf, yum, etc.)</li>
    <li>Permisos d‚Äôadministrador (root o sudo) per a la instal¬∑laci√≥</li>
    <li>PostgreSQL crea un usuari propi del sistema: <code>postgres</code></li>
    <li>Connexi√≥ a xarxa si: Hi haur√† connexions remotes, El servidor no ser√† nom√©s local</li>
    <li>Port disponible: Port per defecte: 5432</li>
 </ul>

 <ul> <strong> Requisits recomanats per a producci√≥</strong>
     <li>4‚Äì8 GB de RAM o m√©s</li>
     <li>Disc SSD</li>
     <li>Sistema de c√≤pies de seguretat</li>
     <li>Connexions xifrades (SSL)</li>
     <li>Tallafocs configurat</li>
 </ul>

  </section>
  



 
  <section id="instancia">
    <h2>Cl√∫ster PostgreSQL (equivalent a una inst√†ncia)</h2>

<ul> Un cl√∫ster PostgreSQL √©s:
    <li>Un conjunt de:Bases de dades, Usuaris (rols), Configuraci√≥</li>
    <li>Gestionat per un sol proc√©s servidor (postmaster / postgres)</li>
    <li>Amb un √∫nic port (normalment 5432)</li>
    <li>Un √∫nic directori de dades</li>
</ul>

    En PostgreSQL:
    <li>Les bases de dades dins d‚Äôun cl√∫ster estan a√Øllades</li>
    <li>No es poden fer joins directes entre BD</li>
    <li>Compartits: Usuaris (rols), Extensions, Configuraci√≥</li>

    <p>Si es necessita NO compartir Usuaris, extensions o configuraci√≥:
    (Si es vol un altre ‚Äúentorn‚Äù: Es crear√† un altre cl√∫ster (altre port / altre directori))  </p>

    <p>En PostgreSQL, la mem√≤ria i els par√†metres principals es veuen i es gestionen sobretot mitjan√ßant par√†metres de configuraci√≥</p>    
  
    <p>Es poden consultar amb les seg√ºents ordres</p>
    <pre>SHOW config_file;

SHOW shared_buffers;
SHOW work_mem;
SHOW max_connections;
    </pre>

    <!--
üõ†Ô∏è Canviar par√†metres
Temporal (sessi√≥):
SET work_mem = '64MB';

Permanent:
ALTER SYSTEM SET work_mem = '64MB';
SELECT pg_reload_conf();


(O editar postgresql.conf i reiniciar si cal)    
    
    -->
  
</section>
  

 

  <section id="arquitectura">
    <h2>Arquitectura de Postgresql</h2>
  <p>L‚Äôarquitectura de PostgreSQL √©s client‚Äìservidor i basada en processos (no en fils com altres SGBD).</p>
  
  <pre>
Client
   ‚îÇ
   ‚ñº
postmaster (proc√©s principal)
   ‚îÇ
   ‚îú‚îÄ Proc√©s backend (1 per connexi√≥)
   ‚îú‚îÄ Proc√©s autovacuum
   ‚îú‚îÄ Proc√©s WAL writer
   ‚îú‚îÄ Proc√©s checkpointer
   ‚îú‚îÄ Proc√©s background writer
   ‚îî‚îÄ Proc√©s stats collector
  </pre>
  <p>Cada connexi√≥ = un proc√©s.</p>
  
<!--
2Ô∏è‚É£ Proc√©s principal: postmaster / postgres
    Arranca el servidor PostgreSQL
    Escolta en un port (per defecte 5432)
    Accepta connexions
    Llan√ßa un proc√©s backend per a cada client


3Ô∏è‚É£ Processos backend (clients)
    Un proc√©s dedicat per connexi√≥
    Executa les consultes SQL
    Accedeix a:
        Mem√≤ria compartida
        Fitxers de dades

üìå A√ß√≤ explica per qu√®:
Moltes connexions = m√©s consum de mem√≤ria
Es recomana pool de connexions

4Ô∏è‚É£ Mem√≤ria en PostgreSQL
üîπ Mem√≤ria compartida
Compartida per tots els processos:
    shared_buffers ‚Üí cach√© de dades
    wal_buffers ‚Üí WAL
    Taules de control i locks

üîπ Mem√≤ria local (per proc√©s)
Cada backend t√© la seua:
    work_mem
    maintenance_work_mem


5Ô∏è‚É£ Escriptura i recuperaci√≥ (WAL)
PostgreSQL usa WAL (Write-Ahead Logging):
    Primer s‚Äôescriu al WAL
    Despr√©s a les dades

Processos implicats:
    WAL writer
    Checkpointer
    Background writer

üìå Garanteix:
    ACID
    Recuperaci√≥ despr√©s de caigudes

6Ô∏è‚É£ Autovacuum (clau en PostgreSQL)
    Neteja versions antigues de files (MVCC)
    Evita creixement excessiu de taules
    Mant√© estad√≠stiques
‚û°Ô∏è Equivalent funcional a:
Undo + manteniment autom√†tic d‚ÄôOracle

7Ô∏è‚É£ Gesti√≥ de concurr√®ncia (MVCC)
    No hi ha bloquejos de lectura
    Cada transacci√≥ veu la seua versi√≥ de les dades
    Les versions velles es netegen amb VACUUM
üìå Gran avantatge en entorns concurrents.

8Ô∏è‚É£ Emmagatzematge
    Cada taula = fitxer (o conjunt de fitxers)
    √çndexs separats
    Tablespaces disponibles
üìå M√©s simple que Oracle, per√≤ molt flexible.

9Ô∏è‚É£ Extensions (part clau de l‚Äôarquitectura)

PostgreSQL permet extensions:
    PostGIS
    pg_stat_statements
    citext

‚û°Ô∏è Amplien el motor sense modificar el core.  
-->

  </section>
  



  <section id="estruc">
    <h2>Estructura recomanada </h2>
<pre>
    
üìÅ Binaris -  /usr/pgsql-16/bin

üìÅ Dades (DATA DIRECTORY) - /pgdata/cluster01/data
     (Cont√©: bases de dades , WAL,  cat√†legs,  configuraci√≥)

üìÅ WAL separat (molt recomanat) -  /pgdata/cluster01/wal
      Configurat amb:  initdb --waldir=/pgdata/cluster01/wal

üìÅ Tablespaces (com datafiles) - /pgdata/tablespaces/ts_dades
                                 /pgdata/tablespaces/ts_indexos
    Exemple: CREATE TABLESPACE ts_dades LOCATION '/pgdata/tablespaces/ts_dades';

üìÅ Logs - /pglogs/cluster01

üìÅ Backups - /pgbackups/cluster01
      ‚ö†Ô∏è üëÅÔ∏è  Si pot ser , en altre disc f√≠sic, o altra ubicaci√≥
</pre>


  </section>
  
 

  <section id="instalacio">
    <h2>üêò Instal¬∑laci√≥ de PostgreSQL</h2>
    üìå PostgreSQL √©s lliure i gratu√Øt.
    <p>Es pot trobar m√©s informaci√≥ en la p√†gina oficial  <a href="https://www.postgresql.org/download/">PostgreSQL/Downloads</a></p>
      
    <h3>Instal¬∑laci√≥ en GNU/Linux (la m√©s habitual)</h3>
    Instal¬∑laci√≥ amb gestor de paquets
    <pre>sudo apt update
sudo apt install postgresql postgresql-contrib
</pre>
    <p>A√ß√≤ instal¬∑la: El <strong>servidor</strong> PostgreSQL, Eines b√†siques,  Extensions comunes</p>
    <ul> üß∞ Eines b√†siques de PostgreSQL
        <li><code>psql</code> Client de l√≠nia de comandes. Serveix per connectar-te al servidor PostgreSQL, Executar consultes SQL, Administrar bases de dades i rols</li>
        <li><code>createdb / dropdb</code> Crear i eliminar bases de dades des de la terminal</li>
        <li> <code>createuser / dropuser</code>  Crear i eliminar usuaris (rols)</li>
        <li> <code>pg_dump</code>  Fer c√≤pies de seguretat (backups)</li>
        <li><code>pg_restore</code> Restaurar c√≤pies fetes amb pg_dump en format no-text</li>
        <li><code>pg_isready / pg_ctl </code></li>
    </ul>

    <ul> Extensions comunes
        <li> uuid-ossp (UUIDs)</li> 
        <li>pg_trgm (cerques similars)</li>
        <li>hstore (clau-valor en una columna)</li>
        <li>citext  (sense diferenciar may-min)</li>
        <li>tablefunc (pivotar dades)</li>
        <li>unaccent (eliminar accents)</li>
    </ul>
    <p>S‚Äôactiven dins la base de dades, no al sistema:</p>
    <pre>CREATE EXTENSION pg_trgm; </pre>

    <p>Durant la instal¬∑laci√≥: Es crea l‚Äôusuari del sistema: postgres , Es crea un cl√∫ster per defecte, 
      El servei s‚Äôinicia,  Escolta pel port 5432</p>

    <h4>  Comprovar que funciona</h4>
    <pre>sudo systemctl status postgresql</pre>
    <h4>Entrar en PostgreSQL</h4>
    <pre>sudo -u postgres psql </pre>

   <h3>Instal¬∑laci√≥ en Windows</h3>
   <h4>Instal¬∑lador gr√†fic</h4>
   <li>Es descarrega un instal¬∑lador oficial</li>
   <li>Durant la instal¬∑laci√≥: Tries la versi√≥, Definixes la contrasenya de l‚Äôusuari postgres,
        Tries el port (5432 per defecte),  S‚Äôinicialitza el cl√∫ster</li>
    <li>Inclou: pgAdmin, psql, Servici de Windows</li>

    <h3>Instal¬∑laci√≥ en macOS</h3>
    <p>Instal¬∑lador oficial, Homebrew</p>
    <pre>brew install postgresql
brew services start postgresql  </pre>

</section>

  <section id="stop">
    <img src="imgs/stop.png" class="imatge-esquerra"  alt="stop" style="width: 6%">
    <h2>Abans de continuar.... </h2>
    <h1>Realitzem la nostra primera instal¬∑laci√≥ de POSTGRES</h1>

    <br><br><h2>En altra m√†quina....</h2>
    <h3>Instal¬∑laci√≥ de client gr√†fic => pdadmin</h3>
    <p>Des de la p√†gina oficial de <a href="https://www.pgadmin.org/download/">pgadmin</a></p>

  </section>



  <section id="acces">
    <h2>Acc√©s a Postgresql</h2>
    <p>Despr√©s de tindre acabada la instal¬∑laci√≥, hem de comprovar que es pot accedir al cluster.</p>
    <h3> Des d'una terminal</h3>
     <pre>sudo -u postgres psql </pre>


    <p>Esta ordre ens connecta al cluster principal...     </p>

    <h3>Configuraci√≥ b√†sica despr√©s d‚Äôinstal¬∑lar</h3>
     Canviar contrasenya de postgres üóùÔ∏è
     <pre>ALTER USER postgres WITH PASSWORD 'nova_contrasenya';</pre>
 
    <h3>Permetre connexions remotes (opcional)</h3>
     Editar: postgresql.conf
     <li>Canviar:  listen_addresses = '*'  </li>
     Editar : pg_hba.conf
    <li>host all all 0.0.0.0/0 md5 </li>
    Recarregar configuraci√≥:
    <pre>SELECT pg_reload_conf(); </pre>

    <h3>Crear BBDD i usuari</h3>
    <pre>CREATE USER alumne WITH PASSWORD '1234';
CREATE DATABASE bd_examen OWNER alumne;  </pre>

        <h3>Arrancar i parar BBDD</h3>
        <pre>sudo systemctl start postgresql
sudo systemctl stop postgresql
sudo systemctl restart postgresql </pre>

   <h3>Connexi√≥ incial</h3>
   <p>Per defecte, (i sin√≥ s'indica altra cosa) PostgreSQL es connecta a una base de dades amb el mateix nom que l‚Äôusuari.</p>
    <p>Quan fas:  <code>psql</code> : PostgreSQL intenta:
        Usuari = usuari del sistema, Base de dades = mateix nom que l‚Äôusuari </p>
    <p>Si la BD no existeix, S'obtindr√† un error: 
        <code>FATAL: database "nom_usuari" does not exist </code> </p>
    <p>Despr√©s d‚Äôinstal¬∑lar PostgreSQL, hi ha sempre: <code> postgres  template0 template1 </code></p>

    <h3>Connexi√≥ impl√≠cita</h3>
    <pre>psql -U alumne -d bd_examen </pre>

    <h3>Explorar cluster</h3>
    <p>Una vegada connectats‚Ä¶ com veure les altres BBDD en PostgreSQL</p>
    <pre>\l
\list
\l+
SELECT datname FROM pg_database;      </pre>

    <p>I per canviar (connectar) a una altra BBDD</p>
    <pre>\c nom_bbdd
\connect nom_bbdd  </pre>


    <h3> Altres maneres d'accedir a la inst√†ncia:</h3>
    <ul>
      <li> Utilitzant  pgadmin</li>
      <li> Utilitzant  Visual Studio Code + Extensi√≥ PostgreSQL O DBCode</li>
      <li> Utilitzant DBeaver ( multi-SGBD sw lliure)</li>
      <li> Utilitzant TOAD  (multi-SGBD propietari)</li>
    </ul>

    <p>üéì Amb tots aquests coneixements, ja est√†s preparat/ada per comen√ßar la unitat dos. Configuraci√≥ d'un SGBD </p>

  </section>
  


  <section id="altres-recursos">
    
    
  </section>


</main>

<script>

  // Per poder copiar codi en el porta-retalls. S'ha de posar un bot√≥ en cada <pre>
      //  <div class="pre-container">
      //    <button class="copy-button">Copia Codi !</button>
  document.addEventListener('DOMContentLoaded', function () {
    const buttons = document.querySelectorAll('.copy-button');

    buttons.forEach(button => {
      button.addEventListener('click', function () {
        const code = this.nextElementSibling.innerText;
        navigator.clipboard.writeText(code).then(() => {
          this.innerText = ' ‚úî Copiat!';
          setTimeout(() => this.innerText = 'Copia Codi !', 3000);
        });
      });
    });
  });

</script>

</body>
</html>

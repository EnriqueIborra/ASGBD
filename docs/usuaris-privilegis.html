<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8">
  <title>üë• Usuaris Oracle</title>
  <link rel="stylesheet" href="estilsunitats.css">
  <link rel="stylesheet" href="https://cdn.hugeicons.com/font/hgi-stroke-rounded.css" />

</head>
<body>

<header>
  <a href="index.html">
    <!--<img src="https://upload.wikimedia.org/wikipedia/commons/5/50/Oracle_logo.svg" alt="Oracle Logo"> -->
    <img src="imgs/ASGBD.png" alt="M√≤dul ASGBD">
  </a>
  <h1>ASGBD   -    Usuaris i Permisos en Oracle</h1>
</header>

<nav>
  <h3>√çndex</h3>
  <a href="#cid">CID en ORACLE</a>
  <a href="#usuaris">Usuaris en ORACLE</a>
  <a href="#segusuaris">Seguretat en Usuaris</a>
  <a href="#permisos">Permisos o Privilegis</a>
  <a href="#rols">Rols en ORACLE</a>
  <a href="#perfils">Quotes i Perfils en ORACLE</a>
  <a href="#vistes">Vistes com mecanisme de seguretat</a>
  <a href="#synonym">synonym en ORACLE</a>
  <a href="#altres-recursos">Altres Recursos</a>
  <a href="#seguretat">2on Part - Seguretat</a>
</nav>

<main>

    
  <section id="cid">
        <h1>La Triada CID (Confidencialitat, Integritat, Disponibilitat) en Oracle</h1>
        <img src="imgs/CID-ciber.png" class="imatge-esquerra"  alt="stop" style="width: 20%">
    <p>La triada CID (Confidencialitat, Integritat i Disponibilitat) √©s un model de seguretat fonamental per garantir la protecci√≥ de la informaci√≥ en qualsevol sistema inform√†tic, incl√≤s Oracle. Aquest model es fa servir per establir les bases de les pol√≠tiques de seguretat, i Oracle, com a sistema de gesti√≥ de bases de dades (SGBD), t√© diverses caracter√≠stiques i eines que permeten implementar-lo efica√ßment.</p>

    <h2>1. Confidencialitat (Confidentiality)</h2>
    <p>La confidencialitat es refereix a la protecci√≥ de la informaci√≥ per evitar que sigui accedida per usuaris no autoritzats. A Oracle, aix√≤ es pot aconseguir mitjan√ßant:</p>
    <ul>
        <li><strong>Autenticaci√≥ i control d'acc√©s</strong>: Oracle utilitza sistemes d'autenticaci√≥ com l'usuari/contrassenya per garantir que nom√©s els usuaris autoritzats puguin accedir a la base de dades.</li>
        <li><strong>Privilegis i rols</strong>: Els rols i privilegis d'Oracle defineixen els drets d'acc√©s de cada usuari a les dades. Els privilegis poden ser assignats a rols espec√≠fics i aquests rols assignats als usuaris.</li>
        <li><strong>Xifrat de dades (Encryption)</strong>: Oracle permet xifrar tant les dades en rep√≤s com les dades en tr√†nsit. La funci√≥ de xifrat de bases de dades d'Oracle (TDE - Transparent Data Encryption) xifra les dades emmagatzemades, mentre que el xifrat SSL/TLS s'utilitza per protegir les dades durant la transmissi√≥.</li>
        <li><strong>Auditoria</strong>: Oracle ofereix eines per auditar l'acc√©s a la base de dades i registrar les operacions realitzades. Aix√≤ permet detectar acc√©s no autoritzat a dades sensibles.</li>
    </ul>

    <h2>2. Integritat (Integrity)</h2>
    <p>La integritat de les dades fa refer√®ncia a la seva exactitud, coher√®ncia i fiabilitat al llarg del temps. Per garantir-la en Oracle, es poden utilitzar diversos mecanismes:</p>
    <ul>
        <li><strong>Restriccions (Constraints)</strong>: Oracle permet definir restriccions per garantir la coher√®ncia de les dades (per exemple, restriccions de clau prim√†ria, clau forana, unicitat i validesa).</li>
        <li><strong>Comprovaci√≥ de validesa (Validations)</strong>: Es poden utilitzar triggers o funcions per validar les dades abans d'introduir-les a la base de dades. Aix√≤ ajuda a mantenir la qualitat i la integritat de la informaci√≥.</li>
        <li><strong>Control de versions i c√≤pies de seguretat</strong>: Les c√≤pies de seguretat regulars i el control de versions ajuden a garantir que les dades puguin ser recuperades de manera fiable en cas de p√®rdua o corrupci√≥.</li>
        <li><strong>Controls de transaccions (ACID)</strong>: Oracle utilitza el model ACID (Atomicitat, Consist√®ncia, A√Øllament, Durabilitat) per assegurar-se que les transaccions s√≥n processades correctament i no alteren la integritat de les dades.</li>
    </ul>

    <h2>3. Disponibilitat (Availability)</h2>
    <p>La disponibilitat fa refer√®ncia a la capacitat de la base de dades per estar accessible i operativa en tot moment. Per assegurar la disponibilitat en Oracle, es poden utilitzar diversos mecanismes i tecnologies:</p>
    <ul>
        <li><strong>Cl√∫sters i alta disponibilitat</strong>: Oracle suporta diverses solucions d'alta disponibilitat, com Oracle Real Application Clusters (RAC), que permeten que m√∫ltiples inst√†ncies de bases de dades treballin en conjunt per garantir que la base de dades estigui sempre disponible, fins i tot en cas de fallades del sistema.</li>
        <li><strong>Recuperaci√≥ davant de desastres (Disaster Recovery)</strong>: Oracle ofereix opcions de recuperaci√≥ davant de desastres, com Oracle Data Guard, que permet replicar les dades en un lloc secundari per garantir que la base de dades estigui disponible en cas d'incidents importants.</li>
        <li><strong>C√≤pies de seguretat i restauraci√≥</strong>: Utilitzar Oracle Recovery Manager (RMAN) per realitzar c√≤pies de seguretat i restaurar les dades √©s essencial per garantir la disponibilitat dels serveis.</li>
        <li><strong>Manteniment i monitoritzaci√≥</strong>: Oracle proporciona eines per monitoritzar la salut del sistema (Oracle Enterprise Manager) i per planificar el manteniment, per evitar aturades no desitjades i per identificar de manera proactiva possibles problemes de disponibilitat.</li>
    </ul>

    <h2>Resum</h2>
    <p>Implementar la triada CID en Oracle implica la combinaci√≥ de m√∫ltiples mecanismes i eines que permeten protegir la informaci√≥:</p>
    <ul>
        <li><strong>Confidencialitat</strong>: Autenticaci√≥, xifrat de dades, control d'acc√©s i auditoria.</li>
        <li><strong>Integritat</strong>: Restriccions de dades, control de transaccions i c√≤pies de seguretat.</li>
        <li><strong>Disponibilitat</strong>: Alta disponibilitat, recuperaci√≥ davant de desastres i monitoritzaci√≥ activa.</li>
    </ul>

    <p>Amb aquests mecanismes, Oracle permet als administradors de bases de dades protegir les dades i garantir que es compleixin les pr√†ctiques de seguretat requerides per a una bona gesti√≥ de la informaci√≥.</p>


  </section>
  

  <section id="usuaris">
    <h2>üë§ Usuaris en Oracle</h2>
   <p>Els usuaris permeten configurar el mecanisme de <strong>Confidencialitat</strong>, Identificant (nom d'usuari), 
    autenticant (amb password, per exemple) i restringint l'acc√©s a dades no permeses (amb els privilegis)</p>  
    <p>Un usuari pot fer i desfer dins del seu esquema, per√≤ NO pot fer res en un altre esquema. Llevat que se li atorgue algun 
      perm√≠s o privilegi per tal menester </p>
    <h3> Qu√® √©s un usuari?</h3>
    <p>Un <strong>usuari Oracle</strong> identifica una entitat que accedeix a la base de dades. Pot representar una persona, aplicaci√≥ o proc√©s.</p>
    <img src="imgs/schema.png" class="imatge-dreta"  alt="stop" style="width: 30%">
    <p>Quan es crea un usuari, tamb√© es crea autom√†ticament el seu <strong>esquema</strong> (schema), que cont√© els seus objectes: taules, vistes, procediments, etc.</p>
    <p>Si un usuari <code>'user1'</code> vol accedir a un objecte d'un altre usuari <code>'user2'</code>, haur√† de anteposar al nom del objecte
      , el nom del schema del propietari del objecte en el moment d'utilitzar la sent√®ncia SQL adequada.  </p>
      <p>Per exemple</p>
      <pre><code>-- Des d'user1, suposant que user1 t√© permis sobre table1 de user2....
SELECT * FROM user2.table1;</code></pre>

    <h3>üîê Autenticaci√≥ d'usuaris</h3>
    <ul>
      <li><strong>Local</strong>: usuari amb credencials dins de la base de dades</li>
      <li><strong>Extern</strong>: validaci√≥ per S.O., LDAP, Kerberos, Radius</li>
      <li><strong>Global</strong>: autenticaci√≥ empresarial o federada (Oracle Enterprise User Security)</li>
      <li><strong>Schema-only</strong>: no necessita contrasenya (nom√©s objectes)</li>
    </ul>
  
    <h3> Tipus d'usuaris</h3>
    <ul>
      <li><strong>Predefinits</strong>: SYS, SYSTEM, SYSBACKUP, etc. (evitar-ne l'√∫s directe si no √©s estrictament necessari)</li>
      <li><strong>Comuns</strong>: disponibles a totes les PDBs (requereixen prefix <code>C##</code>)</li>
      <li><strong>Locals</strong>: definits dins d‚Äôuna PDB concreta</li>
    </ul>
  
    <h3> Creaci√≥, modificaci√≥ i baixa d'usuaris</h3>
    <pre>
  -- Crear usuari en una PDB  (cas m√©s usual)
  CREATE USER joan IDENTIFIED BY '1234';
  
  -- Crear usuari com√∫ (en CDB)
  CREATE USER C##admin IDENTIFIED BY 'secure' CONTAINER=ALL;
  
  -- Modificar contrasenya
  ALTER USER joan IDENTIFIED BY 'nova_clau';
  
  -- Eliminar usuari
  DROP USER joan CASCADE;
  -- Borra usuari i tots els objectes del seu schema
  DROP USER joan;   
  -- Donar√† error si joan te objectes en el seu schema
    </pre>
  
    <h3> Atributs addicionals en la creaci√≥</h3>
    <pre>
  CREATE USER enric IDENTIFIED BY secret
  DEFAULT TABLESPACE users
  TEMPORARY TABLESPACE temp
  QUOTA UNLIMITED ON users
  PROFILE default;     </pre>
  <p class="alert">- QUOTA √©s obligatori si es volen crear objectes dins de l'schema</p>
  
    <h3>üîë Donar permisos de connexi√≥</h3>
    <p>Un usuari no pot connectar si no t√© el privilegi <code>CREATE SESSION</code>:</p>
    <p>(i inicialment, quan es crea l'usuari, no t√© el privilegi automaticament !!)</p>
    <pre>GRANT CREATE SESSION TO joan;</pre>
  
    <h3> Estats dels comptes</h3>
    <ul>
      <li> Obert</li>
      <li> Bloquejat</li>
      <li> Expirat</li>
      <li> Expirat en per√≠ode de gr√†cia</li>
      <li> <a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/refrn/USER_USERS.html">i m√©s..</a></li>  
    </ul>
  
    <h4>Exemples de gesti√≥:</h4>
    <pre>
  ALTER USER joan ACCOUNT LOCK;
  ALTER USER joan ACCOUNT UNLOCK;
  ALTER USER joan PASSWORD EXPIRE;
    </pre>
  
    <h3>üîç Consultes √∫tils</h3>
    <pre>
  -- Usuaris existents
  SELECT username, account_status FROM dba_users;
  
  -- Esquema actiu
  SELECT user FROM dual;
  
  -- Par√†metres d‚Äôusuaris administratius
  SELECT * FROM v$pwfile_users;
    </pre>
  
    <h3> Notes importants</h3>
    <ul>
      <li> No es poden crear usuaris directament a <code>CDB$ROOT</code> sense permisos especials</li>
      <li> Un usuari pot tindre <strong>un √∫nic perfil</strong> i m√∫ltiples <strong>rols i privilegis</strong></li>
      <li> S'ha de donar quota d'espai per a crear objectes</li>
    </ul>
  
    <h3> Exemple complet: usuari operatiu</h3>
    <pre>
  CREATE USER enric IDENTIFIED BY secret
  DEFAULT TABLESPACE tab_app
  QUOTA UNLIMITED ON tab_app
  PASSWORD EXPIRE;
  
  GRANT CONNECT, RESOURCE TO enric;
    </pre>
  
    <h3>üí¨ Autenticaci√≥ en multitenant (CDB/PDB)</h3>
    <ul>
      <li>SYS nom√©s pot accedir amb <code>AS SYSDBA</code></li>
      <li>Es recomana accedir a les PDBs amb usuaris locals</li>
    </ul>
  
    <pre>
  -- Connexi√≥ com SYSTEM a PDB1
  sqlplus system@localhost/pdb1
    </pre>
  
    <h3> Vistes relacionades amb usuaris</h3>
    <ul>
      <li><code>DBA_USERS</code></li>
      <li><code>V$PWFILE_USERS</code></li>
      <li><code>USER_USERS</code></li>
      <li><code>SESSION_USERS</code></li>
    </ul>
  
    <h3> Bones pr√†ctiques</h3>
    <ul>
      <li> Canviar contrasenyes predefinides</li>
      <li> No usar SYS o SYSTEM per a operacions del dia a dia</li>
      <li> Crear un tablespace separat per a cada aplicaci√≥/usuari</li>
      <li> Utilitzar rols i perfils per gestionar permisos i restriccions</li>
    </ul>
  </section>
  

  <section id="segusuaris">
        <h2>üîê Bloquejar Usuaris i For√ßar a Canviar Contrasenya en Oracle</h1>
        
        <p>Per bloquejar usuaris i for√ßar-los a canviar la seua contrasenya a Oracle, es poden fer servir diverses 
          funcionalitats per gestionar les contrasenyes i els comptes d'usuari. </p>
        <p>Un usuari bloquejat NO POT accedir al sistema i no pot canviar el estat per si mateix. Ho ha de sol¬∑licitar al DBA</p>  
        <p>Un usuari amb la password expirada  ( i en periode de gr√†cia) SI pot accedir, sempre que abans canvie la contrasenya expirada</p>  
        <p>Un usuari amb la password expirada i fora del periode de gr√†cia, NO pot accedir. Si vol accedir, ho ha de sol¬∑licitar al DBA</p>  
        <p>Usuari amb contrasenya a punt de caducar (Per√≠ode de gr√†cia imminent). Oracle pot permetre l'acc√©s, per√≤ el sistema pot 
          mostrar una advert√®ncia que la contrasenya caducar√† en breu. Aix√≤ dep√®n de la configuraci√≥ del perfil.</p>
    
        <h2>1. Bloquejar / desbloquejar un Usuari en Oracle</h2>

        <h3>Bloquejar un usuari:</h3>
        <pre><code>ALTER USER &lt;nom_usuari&gt; ACCOUNT LOCK;</code></pre>
        <p>On &lt;nom_usuari&gt; √©s el nom de l'usuari que vols bloquejar.</p>
     
        <h3>Desbloquejar un usuari:</h3>
        <pre><code>ALTER USER &lt;nom_usuari&gt; ACCOUNT UNLOCK;</code></pre>
    
        <h2>2. For√ßar un Usuari a Canviar la Contrasenya</h2>
        <p>Oracle permet for√ßar que un usuari canvie la seva contrasenya en el pr√≤xim inici de sessi√≥.
           Per fer-ho, s'utilitza l'ordre seg√ºent:</p>
         <pre><code>ALTER USER &lt;nom_usuari&gt; PASSWORD EXPIRE;</code></pre>
  
        <h2>3. Combinaci√≥ d'ordres per Bloquejar i For√ßar el Canvi de Contrasenya</h2>
        <p>Si vols bloquejar un usuari i, a m√©s, for√ßar-lo a canviar la contrasenya quan siga desbloquejat, pots utilitzar aquestes dues ordres:</p>
    
        <pre><code>ALTER USER &lt;nom_usuari&gt; ACCOUNT LOCK;
ALTER USER &lt;nom_usuari&gt; PASSWORD EXPIRE;</code></pre>
  
        <h2>4. Configurar el Caducament Autom√†tic de Contrasenyes</h2>
        <p>Per configurar que Oracle force el canvi de contrasenya autom√†ticament despr√©s d'un cert temps
           (per exemple, despr√©s de 30 dies), pots configurar la pol√≠tica de contrasenyes de la base de dades.
            Aix√≤ es fa mitjan√ßant l'atribut <code>PASSWORD_LIFE_TIME</code> del perfil d'usuari:</p>
            <p>Els perfils es veuen en esta unitat, un poc m√©s endavant...</p>
    
        <pre><code>ALTER PROFILE &lt;nom_perfil&gt; LIMIT PASSWORD_LIFE_TIME &lt;dies&gt;;</code></pre>
    
        <h4>Exemple (per 30 dies):</h4>
        <pre><code>ALTER PROFILE DEFAULT LIMIT PASSWORD_LIFE_TIME 30;</code></pre>
    
        <p>Aix√≤ far√† que les contrasenyes dels usuaris que tinguen aquest perfil caduquen despr√©s de 30 dies,
           for√ßant-los a canviar la contrasenya en el seg√ºent inici de sessi√≥.</p>
      
        <p>Aquests s√≥n els mecanismes b√†sics per gestionar usuaris en Oracle, bloquejant-los i 
          for√ßant-los a canviar les contrasenyes quan siga necessari.</p>
 
  </section>



  <section id="permisos">
    <h2>üóùÔ∏è Permisos en Oracle</h2>
  
    <h3> Qu√® s√≥n els permisos (privilegis)?</h3>
    <p>
      Els <strong>permisos</strong> o <strong>privilegis</strong> s√≥n drets que Oracle atorga als usuaris per fer determinades accions sobre la base de dades: 
      accedir, modificar, crear, administrar objectes o usuaris.
    </p>
  
    <h3> Tipus de permisos</h3>
    <ul>
      <li><strong>Privilegis de sistema</strong>: permeten executar accions globals (crear taules, accedir a sessions...)</li>
      <li><strong>Privilegis d‚Äôobjecte</strong>: permeten accedir o modificar objectes concrets (taules, vistes...)</li>
    </ul>
  
    <h4> Exemples de privilegis de sistema</h4>
    <ul>
      <li><code>CREATE SESSION</code> ‚Üí accedir a Oracle</li>
      <li><code>CREATE TABLE</code> ‚Üí crear taules</li>
      <li><code>UNLIMITED TABLESPACE</code> ‚Üí √∫s il¬∑limitat d‚Äôespai</li>
    </ul>
  
    <h4> Exemples de privilegis d‚Äôobjecte</h4>
    <ul>
      <li><code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code> sobre taules</li>
      <li><code>EXECUTE</code> sobre procediments i funcions</li>
    </ul>
  
    <h3> Assignaci√≥ de privilegis</h3>
    <pre>
  -- Sistema
  GRANT CREATE SESSION TO joan;
  
  -- Objecte
  GRANT SELECT, INSERT ON alumnes TO joan;
    </pre>
  
    <h3>‚ôªÔ∏è Revocar permisos</h3>
    <pre>
  -- Sistema
  REVOKE CREATE SESSION FROM joan;
  
  -- Objecte
  REVOKE INSERT ON alumnes FROM joan;
    </pre>
  
    <h3>üåê Propagaci√≥ amb GRANT OPTION</h3>
    <p>Permet que un usuari que ha rebut un privilegi el pugui concedir a un altre:</p>
    <pre>
  GRANT SELECT ON alumnes TO joan WITH GRANT OPTION;
    </pre>
  
    <h3>üëÄ Consultes √∫tils</h3>
    <pre>
  -- Privilegis de sistema atorgats
  SELECT * FROM dba_sys_privs WHERE grantee = 'JOAN';
  
  -- Privilegis d‚Äôobjecte
  SELECT * FROM dba_tab_privs WHERE grantee = 'JOAN';
  
  -- Qu√® puc fer?
  SELECT * FROM session_privs;
    </pre>
  
    <h3>üß™ Exemple pr√†ctic</h3>
    <pre>
  -- Crear usuari i donar acc√©s b√†sic
  CREATE USER marta IDENTIFIED BY 1234;
  GRANT CREATE SESSION, CREATE TABLE TO marta;
  
  -- Permetre a marta consultar alumnes
  GRANT SELECT ON alumnes TO marta;   -- es dona a marta permis per consultar taula alumnes (usuari propietari de la taula alumnes)
  -- 'o'
  GRANT SELECT ON joan.alumnes TO marta;
  -- es dona a marta permis per consultar taula alumnes de l'usuari joan
    </pre>

    <p>Si un usuari <code>'user1'</code> vol accedir a un objecte d'un altre usuari <code>'user2'</code>, haur√† de anteposar al nom del objecte
      , el nom del schema del propietari del objecte en el moment d'utilitzar la sent√®ncia SQL adequada.  </p>
      <p>Per exemple</p>
      <pre><code>-- Des d'user1, suposant que user1 t√© permis sobre table1 de user2....
SELECT * FROM user2.table1;</code></pre>

  
    <h3>Consideracions importants</h3>
    <ul>
      <li> Els privilegis de sistema s√≥n molt potents: assigna nom√©s els necessaris</li>
      <li> Els privilegis d‚Äôobjecte poden donar-se amb m√©s flexibilitat</li>
      <li> No utilitzis <code>GRANT ALL</code> llevat que sigui imprescindible</li>
      <li> Revisa i revoca privilegis regularment</li>
    </ul>
  
    <h3>üìò Bones pr√†ctiques</h3>
    <ul>
      <li> Usa rols per agrupar permisos (veurem a la seg√ºent secci√≥)</li>
      <li> Documenta qu√® rep cada usuari i per qu√®</li>
      <li> Monitoritza qui t√© permisos amb consultes sobre el diccionari de dades</li>
    </ul>
  </section>
  

  <section id="rols">
    <h2>üé≠ Rols en Oracle</h2>
  
    <h3> Qu√® √©s un rol?</h3>
    <p>
      Un <strong>rol</strong> √©s un conjunt de permisos agrupats baix un nom.
       Serveix per simplificar la gesti√≥ de privilegis, especialment en entorns amb molts usuaris.
    </p>
    <p>En compte d'assignar 10 permisos a cada usuari, es crea un rol amb aquests permisos i s'assigna el rol.</p>
  
    <h3> Tipus de rols</h3>
    <ul>
      <li><strong>Predefinits</strong> (creats per Oracle): <code>DBA</code>, <code>CONNECT</code>, <code>RESOURCE</code>, <code>SELECT_CATALOG_ROLE</code>, etc.</li>
      <li><strong>Definits per l‚Äôusuari</strong>: creats per l‚Äôadministrador segons les necessitats espec√≠fiques</li>
      <li><strong>Rols actius/inactius</strong>: en una sessi√≥ es poden activar o desactivar rols</li>
    </ul>
  
    <h3>üõ†Ô∏è Crear i assignar rols</h3>
    <pre>
  -- Crear un nou rol
  CREATE ROLE gestor_aula;
  
  -- Concedir permisos al rol
  GRANT CREATE SESSION, CREATE TABLE TO gestor_aula;
  
  -- Assignar el rol a un usuari
  GRANT gestor_aula TO marta;
    </pre>
  
    <h3> Revocar rols</h3>
    <pre>
  REVOKE gestor_aula FROM marta;
    </pre>
  
   <!-- <h3> Activar i desactivar rols</h3>
    <p>Un usuari pot tindre diversos rols assignats, per√≤ potser alguns poden estar actius i altres no.</p>
    <pre>
  -- Activar un rol espec√≠fic
  SET ROLE gestor_aula;
  
  -- Activar tots els rols per defecte
  SET ROLE ALL;
  
  -- Desactivar tots els rols
  SET ROLE NONE;
    </pre>     -->
  
    <h3>üîç Consultes √∫tils</h3>
    <pre>
  -- Rols assignats a un usuari
  SELECT * FROM dba_role_privs WHERE grantee = 'MARTA';
  
  -- Rols definits al sistema
  SELECT * FROM dba_roles;
  
  -- Privilegis d‚Äôun rol
  SELECT * FROM role_sys_privs WHERE role = 'GESTOR_AULA';
    </pre>
  
    <h3> Exemple pr√†ctic complet</h3>
    <pre>
  CREATE ROLE aplicacio_web;
  
  GRANT CREATE SESSION TO aplicacio_web;
  GRANT SELECT, INSERT, UPDATE ON alumnes TO aplicacio_web;
  
  CREATE USER webapp IDENTIFIED BY secret;
  GRANT aplicacio_web TO webapp;
    </pre>
  
    <h3> Bones pr√†ctiques</h3>
    <ul>
      <li> Agrupa privilegis per rols segons la funcionalitat (ex: lectura, administraci√≥, desenvolupament)</li>
      <li> Documenta qu√® fa cada rol i qui l‚Äôha de tenir</li>
      <li> No afegeixis <code>ALL PRIVILEGES</code> dins d‚Äôun rol sense motiu justificat</li>
      <li> Usa rols en lloc de donar permisos individuals sempre que siga possible</li>
    </ul>
  </section>
  

  <section id="perfils">
    <h2>Perfils en Oracle</h2>
  
    <h3> Qu√® √©s un perfil?</h3>
    <p>
      En Oracle, un <strong>perfil</strong> √©s un conjunt de restriccions i par√†metres que s‚Äôapliquen als usuaris de la base de dades. 
      Aquests par√†metres permeten controlar l‚Äô√∫s de recursos del sistema (com el nombre m√†xim de sessions, temps connectat, etc.) 
      i establir pol√≠tiques de seguretat sobre les contrasenyes.
    </p>
    <p>En oracle hi ha un perfil predefinit. El perfil anomenat <strong>DEFAULT</strong></p>
    <p> Quan es crea un usuari, se li assigna un perfil per defecte -> DEFAULT</p>
  <pre>SQL> select * from dba_profiles where profile=‚ÄôDEFAULT‚Äô;   </pre>
  <p>Un perfil t√© dos tipus/grups de par√†metres</p>
  <ul>
    <li>Par√†metres de recursos</li>
    <li>Par√†metres de contrasenyes</li>
  </ul>
    <h3> Par√†metres de recursos</h3>
    <p>
      Els par√†metres de recursos limiten l‚Äô√∫s que pot fer un usuari del sistema. Alguns dels m√©s comuns s√≥n:
    </p>
    <ul>
      <li><strong>SESSIONS_PER_USER</strong>: N√∫mero m√†xim de sessions que pot tenir un usuari.</li>
      <li><strong>CONNECT_TIME</strong>: Temps m√†xim de connexi√≥ per sessi√≥ (en minuts).</li>
      <li><strong>IDLE_TIME</strong>: Temps m√†xim que un usuari pot estar inactiu abans de ser desconnectat.</li>
      <li><strong>CPU_PER_SESSION</strong> i <strong>CPU_PER_CALL</strong>: L√≠mit de CPU (en cent√®simes de segon).</li>
      <li><strong>LOGICAL_READS_PER_SESSION</strong> i <strong>LOGICAL_READS_PER_CALL</strong>: L√≠mit de lectures l√≤giques en blocs.</li>
    </ul>
  
    <h3> Par√†metres de contrasenya</h3>
    <p>
      Els par√†metres de contrasenya ajuden a refor√ßar la seguretat dels usuaris, control¬∑lant aspectes com:
    </p>
    <ul>
      <li><strong>FAILED_LOGIN_ATTEMPTS</strong>: Nombre d'intents fallits d'autenticaci√≥ abans de bloquejar el compte.</li>
      <li><strong>PASSWORD_LIFE_TIME</strong>: Durada de la contrasenya abans que expiri (en dies).</li>
      <li><strong>PASSWORD_REUSE_TIME</strong>: Temps m√≠nim que s'ha d'esperar per reutilitzar una contrasenya.</li>
      <li><strong>PASSWORD_REUSE_MAX</strong>: Nombre m√†xim de vegades que es pot reutilitzar la contrasenya.</li>
      <li><strong>PASSWORD_LOCK_TIME</strong>: Temps de bloqueig del compte despr√©s de superar els intents fallits.</li>
      <li><strong>PASSWORD_GRACE_TIME</strong>: Per√≠ode de gr√†cia en qu√® l'usuari pot canviar la contrasenya despr√©s que hagi expirat.</li>
      <li><strong>PASSWORD_VERIFY_FUNCTION</strong>: Funci√≥ de verificaci√≥ de contrasenyes per aplicar pol√≠tiques de complexitat.</li>
    </ul>
  
    <h3> Crear i modificar perfils</h3>
    <p>Pots crear un perfil nou amb l'ordre <code>CREATE PROFILE</code> i modificar-lo amb <code>ALTER PROFILE</code>.</p>
    <pre>
  -- Exemple de creaci√≥ d'un perfil amb restriccions de recursos i contrasenya
  CREATE PROFILE perf-adm LIMIT
    SESSIONS_PER_USER     5
    CONNECT_TIME          120
    IDLE_TIME             30
    FAILED_LOGIN_ATTEMPTS 4
    PASSWORD_LIFE_TIME    165;
  
  -- Modificar un perfil per establir un temps de bloqueig de la contrasenya
  ALTER PROFILE perf-adm LIMIT PASSWORD_LOCK_TIME 5;
    </pre>
  
    <h3> Assignar un perfil a un usuari</h3>
    <p>En crear o modificar un usuari, pots assignar-li un perfil per limitar els recursos i aplicar pol√≠tiques de seguretat:</p>
    <pre>
  -- Crear un usuari amb un perfil espec√≠fic
  CREATE USER enric IDENTIFIED BY secret
    DEFAULT TABLESPACE tab_app
    QUOTA UNLIMITED ON tab_app
    PROFILE perf-adm;
  
  -- O actualitzar un usuari existent per assignar-li un perfil
  ALTER USER enric PROFILE perf-adm;
    </pre>
  
    <h3> Bones pr√†ctiques</h3>
    <ul>
      <li>Assigna perfils adaptats a la naturalesa dels usuaris (admins, desenvolupadors, operatius, etc.).</li>
      <li>Revisa peri√≤dicament els par√†metres de recursos i contrasenya per garantir un equilibri entre rendiment i seguretat.</li>
      <li>Assegura‚Äôt que els usuaris amb privilegis elevats tinguin pol√≠tiques de seguretat m√©s estrictes.</li>
      <li>Utilitza el perfil DEFAULT com a punt de partida i modifica els par√†metres segons les necessitats espec√≠fiques.</li>
    </ul>
  
    <h3>üîç Consultes √∫tils relacionades amb perfils</h3>
    <pre>
  -- Consultar els perfils definit per la base de dades
  SELECT * FROM dba_profiles ORDER BY profile;
  
  -- Consultar par√†metres de tipus PASSWORD en el perfil DEFAULT
  SELECT * FROM dba_profiles WHERE resource_type = 'PASSWORD';
  
  -- Consultar usuaris i els seus perfils
  SELECT username, profile FROM dba_users;
    </pre>
    <h3>üîç Esborrar perfils</h3>
<pre>DROP PROFILE nom_perfil;
     o
     DROP PROFILE nom_perfil [CASCADE]; </pre>
    <p>Especifiqueu CASCADE per desassignar el perfil dels usuaris a qui estigui assignat. Oracle Database assigna 
      autom√†ticament el perfil DEFAULT a aquests usuaris. Heu d'especificar aquesta cl√†usula per eliminar un perfil
       que est√† assignat actualment als usuaris</p>

    <h3> Resum</h3>
    <p>
      Els perfils en Oracle s√≥n eines fonamentals per controlar l‚Äô√∫s dels recursos i refor√ßar la seguretat dels comptes d‚Äôusuaris. 
      Mitjan√ßant la creaci√≥, modificaci√≥ i assignaci√≥ de perfils, es pot garantir que els usuaris compleixin amb les pol√≠tiques establertes, 
      tot assegurant un rendiment √≤ptim i la protecci√≥ de la base de dades.
    </p>
  </section>

  

  <section id="vistes">

    <h1>Vistes com a Element de Seguretat en Oracle</h1>
    <p>Les <strong>vistes (views)</strong> en Oracle poden ser un element molt poder√≥s per a la seguretat de les dades, ja que permeten controlar quines dades poden ser accessibles pels usuaris i com aquestes dades s√≥n presentades. Les vistes no emmagatzemen dades pr√≤piament dites, sin√≥ que s√≥n definicions de consultes SQL que es poden utilitzar com si fossin taules normals. Aix√≤ significa que les vistes permeten a l'administrador de bases de dades (DBA) establir un nivell de seguretat i restricci√≥ per a l'acc√©s a la informaci√≥ a trav√©s de consultes personalitzades.</p>

    <h2>Vistes com a element de seguretat a Oracle</h2>
    <p>A continuaci√≥, explico algunes de les principals maneres en qu√® les vistes poden ser utilitzades per millorar la seguretat en Oracle:</p>

    <h3>1. Restricci√≥ d'Acc√©s a Dades Sensibles</h3>
    <p><strong>Descripci√≥</strong>: Les vistes permeten crear consultes personalitzades que poden ocultar certes columnes o taules que contenen dades sensibles. En lloc de permetre que un usuari accedeixi directament a una taula, es pot crear una vista que exposi nom√©s una part de les dades.</p>
    <pre><code>CREATE VIEW vista_clients_completa AS
SELECT nom, adreca, telefon
FROM clients;</code></pre>
    <p><strong>Avantatge de seguretat</strong>: Limita l'exposici√≥ de dades sensibles a nom√©s la informaci√≥ necess√†ria, millorant la seguretat de la informaci√≥ confidencial.</p>

    <h3>2. Autenticaci√≥ de Consultes</h3>
    <p><strong>Descripci√≥</strong>: Pots utilitzar vistes per garantir que nom√©s es poden realitzar consultes sobre un conjunt espec√≠fic de dades segons el rol o els permisos d'un usuari. Aix√≤ es fa mitjan√ßant el control de permisos en les vistes.</p>
    <pre><code>GRANT SELECT ON vista_clients_completa TO usuari_x;</code></pre>
    <p><strong>Avantatge de seguretat</strong>: Aquesta t√®cnica permet controlar l'acc√©s a les dades a nivell d'usuari, garantint que nom√©s els usuaris autoritzats tinguin acc√©s a les vistes que exposen les dades filtrades o restringides.</p>

    <h3>3. Control de Columnes</h3>
    <p><strong>Descripci√≥</strong>: Les vistes permeten ocultar columnes senceres d'una taula, cosa que √©s √∫til per amagar dades que no s'haurien de mostrar. Aix√≤ √©s especialment √∫til quan les taules contenen dades sensibles, com ara contrasenyes, n√∫meros de seguretat social, etc.</p>
    <pre><code>CREATE VIEW vista_usuaris AS
SELECT id, nom, correu
FROM usuaris;</code></pre>
    <p><strong>Avantatge de seguretat</strong>: Permet amagar dades sensibles i garantir que nom√©s la informaci√≥ necess√†ria sigui accessible.</p>

    <h3>4. Control de les Consultes Realitzades</h3>
    <p><strong>Descripci√≥</strong>: Mitjan√ßant la creaci√≥ de vistes, es pot controlar exactament quines consultes s√≥n permeses i com s√≥n realitzades. Aix√≤ permet als administradors establir regles de consulta que limitin l'acc√©s a determinats conjunts de dades.</p>
    <pre><code>CREATE VIEW vista_transaccions_usuaris AS
SELECT transaccio_id, data, import
FROM transaccions
WHERE usuari_id = :usuari_id;</code></pre>
    <p><strong>Avantatge de seguretat</strong>: Pot restringir l'abast de les dades consultades i garantir que els usuaris nom√©s obtinguin informaci√≥ rellevant i personalitzada.</p>

    <h3>5. Vistes Amb Funcionalitat de Seguretat Basada en Rols</h3>
    <p><strong>Descripci√≥</strong>: Utilitzant vistes, pots aplicar seguretat a nivell de rols, permetent que nom√©s certs rols d'usuari puguin accedir a determinades dades. Per exemple, un DBA pot crear una vista per a usuaris normals que nom√©s mostri informaci√≥ b√†sica, mentre que un usuari amb un rol administratiu podria tenir acc√©s a una vista m√©s detallada.</p>
    <pre><code>CREATE VIEW vista_dades_normals AS
SELECT nom, adre√ßa FROM clients;

CREATE VIEW vista_dades_administrador AS
SELECT * FROM clients;</code></pre>
    <p>L'usuari amb un rol normal nom√©s pot veure <code>vista_dades_normals</code>, mentre que l'usuari amb rol d'administrador t√© acc√©s a <code>vista_dades_administrador</code>.</p>
    <p><strong>Avantatge de seguretat</strong>: Permet controlar l'acc√©s a les dades basat en rols d'usuari, garantint que els usuaris nom√©s tinguin acc√©s a la informaci√≥ que necessiten.</p>

    <h3>6. Auditoria i Monitoritzaci√≥ de Consultes</h3>
    <p><strong>Descripci√≥</strong>: Les vistes tamb√© poden ser √∫tils per auditar i monitoritzar les consultes. Per exemple, pots crear una vista que permeti a l'usuari visualitzar nom√©s els canvis realitzats en la taula de transaccions en un per√≠ode de temps determinat.</p>
    <pre><code>CREATE VIEW vista_transaccions_audit AS
SELECT transaccio_id, data, import, operacio
FROM transaccions_audit
WHERE data > '2024-01-01';</code></pre>
    <p><strong>Avantatge de seguretat</strong>: Aix√≤ permet monitoritzar l'activitat de la base de dades i detectar possibles accessos no autoritzats o activitats sospitoses.</p>

    <h2>Conclusions</h2>
    <p>Les <strong>vistes en Oracle</strong> s√≥n una eina molt potent per millorar la seguretat de les dades en una base de dades. Algunes de les maneres en qu√® es poden utilitzar com a element de seguretat s√≥n:</p>
    <ul>
        <li><strong>Restricci√≥ d'acc√©s a dades sensibles</strong></li>
        <li><strong>Autenticaci√≥ de consultes</strong> mitjan√ßant l'assignaci√≥ de permisos a les vistes.</li>
        <li><strong>Control de columnes</strong> per amagar dades sensibles.</li>
        <li><strong>Control de consultes</strong> per limitar l'abast de les dades consultades.</li>
        <li><strong>Seguretat basada en rols</strong> per restringir l'acc√©s a vistes espec√≠fiques segons els permisos d'usuari.</li>
        <li><strong>Auditoria i monitoritzaci√≥</strong> per fer seguiment de les operacions en la base de dades.</li>
    </ul>
    <p>Les vistes permeten personalitzar l'acc√©s a la informaci√≥ i garantir que nom√©s els usuaris autoritzats tinguin acc√©s a dades cr√≠tiques.</p>
  </section>  



  <section id="synonym">
  <h1>√ös de Synonyms en Oracle</h1>

  <p>Un <strong>synonym</strong> (sin√≤nim) en Oracle √©s un √†lies o nom alternatiu per a un objecte de base de dades com una taula, vista, seq√º√®ncia, procediment, funci√≥, paquet o altre objecte. Els synonyms s‚Äôutilitzen per simplificar l'acc√©s als objectes i millorar la seguretat.</p>

  <h2>Tipus de Synonyms</h2>
  <ul>
    <li><strong>Public Synonym:</strong> Visible per a tots els usuaris de la base de dades.</li>
    <li><strong>Private Synonym:</strong> Nom√©s visible per a l‚Äôusuari que el crea.</li>
  </ul>

  <h2>Beneficis de Seguretat i Usabilitat</h2>
  <ul>
    <li>Oculta el nom real o l'esquema de l'objecte.</li>
    <li>Permet controlar millor els accessos a objectes a trav√©s de permisos sobre el synonym.</li>
    <li>Facilita la migraci√≥ o canvi d'esquema sense afectar el codi SQL que fa servir el synonym.</li>
  </ul>

  <h2>Exemples d‚Äô√∫s</h2>

  <h3>1. Crear un synonym privat</h3>
  <pre><code>CREATE SYNONYM emp FOR empresa.empleats;</code></pre>
  <p>Ara, en lloc de fer servir <code>empresa.empleats</code>, l‚Äôusuari pot fer servir simplement <code>emp</code>.</p>

  <h3>2. Crear un synonym p√∫blic</h3>
  <pre><code>CREATE PUBLIC SYNONYM emp FOR empresa.empleats;</code></pre>
  <p>Tots els usuaris poden accedir a la taula <code>empleats</code> com <code>emp</code>, sempre que tinguin permisos.</p>

  <h3>3. Eliminar un synonym</h3>
  <pre><code>DROP SYNONYM emp;
DROP PUBLIC SYNONYM emp;</code></pre>

  <h2>Consideracions de Seguretat</h2>
  <ul>
    <li>No atorga autom√†ticament permisos sobre l'objecte. Cal fer un <code>GRANT</code> per separat.</li>
    <li>Poden ser √∫tils per limitar l‚Äôexposici√≥ d‚Äôesquemes i estructures internes.</li>
    <li>Els synonyms p√∫blics han de ser usats amb precauci√≥ per evitar conflictes i exposici√≥ d‚Äôobjectes no desitjats.</li>
  </ul>

  <h2>Conclusi√≥</h2>
  <p>Els <strong>synonyms</strong> en Oracle s√≥n √∫tils per simplificar noms d‚Äôobjectes i ocultar detalls interns. Utilitzats correctament, poden millorar l‚Äôorganitzaci√≥, la seguretat i la flexibilitat de les aplicacions que accedeixen a la base de dades.</p>

  </section> 



  <section id="altres-recursos">
    <h2>Altres recursos</h2>
    <h3>Usuaris NO admin en Windows</h3>
       <a href="https://github.com/EnriqueIborra/ASGBD/blob/3110bfbccca9c294245e153db8cffb709ace32b0/UD3/ASGBD-UD3.1.1%20Usuaris%20NO%20admin%20en%20W10.pdf">link</a> 
    <h3>Update i Select en ORACLE</h3>
    <a href="https://github.com/EnriqueIborra/ASGBD/blob/3110bfbccca9c294245e153db8cffb709ace32b0/UD3/ASGBD-UD3.1.2%20Update%20i%20select%20en%20oracle.pdf">link</a>
    <h3>Usuaris Comuns ORACLE</h3>
    <a href="https://github.com/EnriqueIborra/ASGBD/blob/3110bfbccca9c294245e153db8cffb709ace32b0/UD3/ASGBD-UD3.1.3%20usuaris%20comuns%20en%20oracle.pdf">link</a>
  </section>
 
  <section id="seguretat">
    <h2> <a href="seguretat-mecanismes.html">Seguretat en ORACLE</a></h2>
  
  </section>
 

</main>

<script>

// Per poder copiar codi en el porta-retalls. S'ha de posar un bot√≥ en cada <pre>
      //  <div class="pre-container">
      //    <button class="copy-button">Copia Codi !</button>
  document.addEventListener('DOMContentLoaded', function () {
    const buttons = document.querySelectorAll('.copy-button');

    buttons.forEach(button => {
      button.addEventListener('click', function () {
        const code = this.nextElementSibling.innerText;
        navigator.clipboard.writeText(code).then(() => {
          this.innerText = ' ‚úî Copiat!';
          setTimeout(() => this.innerText = 'Copia Codi !', 3000);
        });
      });
    });
  });

</script>

</body>
</html>


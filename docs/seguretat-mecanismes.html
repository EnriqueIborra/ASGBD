<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8">
  <title>üîí Seguretat Oracle</title>
  <link rel="stylesheet" href="estilsunitats.css">
  <link rel="stylesheet" href="https://cdn.hugeicons.com/font/hgi-stroke-rounded.css" />

</head>
<body>

<header>
  <a href="index.html">
    <!--<img src="https://upload.wikimedia.org/wikipedia/commons/5/50/Oracle_logo.svg" alt="Oracle Logo"> -->
    <img src="imgs/ASGBD.png" alt="M√≤dul ASGBD">
</a>
  <h1>ASGBD   -    Mecanismes de Seguretat</h1>
</header>

<nav class="segu">
  <h3>√çndex</h3>
  <a href="#encripta">Encriptaci√≥ en  ORACLE</a>
  <a href="#auditoria">Auditoria en ORACLE</a>
  <a href="#integritat">Integritat</a>
  <a href="#transaccions">Transaccions (TCL)</a>
  <a href="#backups">Backups</a>
  <a href="#normativa-vigent">Normativa vigent</a>
  <a href="#altres-recursos">Altres Recursos</a>
</nav>

<main>
     
    <section id="encripta">
    <h2>üîê Encriptaci√≥ en Oracle</h2>

    <h3> Qu√® √©s i per qu√® encriptar?</h3>
    <p>L‚Äôencriptaci√≥ converteix dades llegibles en format codificat (xifrat) que nom√©s pot ser desxifrat amb una clau. √âs essencial per protegir informaci√≥ sensible.</p>

    <h4> Raons per aplicar encriptaci√≥:</h4>
    <ul>
        <li>Protecci√≥ de dades sensibles (DNI, contrasenyes...)</li>
        <li>Evitar robatori de dades en cas d‚Äôatac o acc√©s indegut</li>
        <li>Compliment legal (RGPD, LOPDGDD)</li>
        <li>Requisits de seguretat corporativa o governamental (CCN-CERT)</li>
    </ul>

    <h4>‚ö†Ô∏è Possibles inconvenients:</h4>
    <ul>
        <li>Rendiment redu√Øt si s‚Äôusa massivament</li>
        <li>Augment de complexitat en la gesti√≥</li>
        <li>Pot limitar compatibilitats amb aplicacions</li>
    </ul>

    <h3>üõ†Ô∏è Tipus d‚Äôencriptaci√≥ a Oracle</h3>
    <ul>
        <li><strong>Manual amb DBMS_CRYPTO</strong>: per programadors o xifrat personalitzat</li>
        <li><strong>TDE (Transparent Data Encryption)</strong>: xifrat autom√†tic per columnes o tablespaces</li>
    </ul>

    <h3> DBMS_CRYPTO (manual)</h3>
    <p>Paquet per fer xifrat, hash i autenticaci√≥.</p>
    <ul>
        <li><code>STANDARD_HASH</code></li>
        <li><code>DBMS_CRYPTO.HASH()</code></li>
        <li><code>DBMS_CRYPTO.ENCRYPT()</code> / <code>DECRYPT()</code></li>
    </ul>

    <h4> Exemple: fer un hash SHA-1 d‚Äôuna contrasenya</h4>
    <pre>SELECT STANDARD_HASH('contrasenya', 'SHA1') FROM dual;   --molt d√®bil actualment  
-- altre tipus de hash  
SELECT STANDARD_HASH('contrasenya', 'SHA256') FROM dual;        </pre>
     <p>STANDARD_HASH soporta tots els algorismes moderns (MD5, SHA1, SHA256, SHA384, SHA512, SHA3_256, SHA3_512‚Ä¶)</p>
     <p>Tamb√© es pot fer amb la funcio HASH del paquet DBMS_CRYPTO</p>
<pre>SELECT RAWTOHEX(  DBMS_CRYPTO.HASH(HEXTORAW('1231'),3) ) FROM dual;
SELECT RAWTOHEX(  DBMS_CRYPTO.HASH(UTL_I18N.STRING_TO_RAW('SECRETA'),4) ) FROM dual;  
-- On el num del segon parametre =>  type 3:SHA-1  type 4:SHA256  type 5:SHA384  type 6:SHA512
</pre>

    <h4> Convertir entre formats:</h4>
    <ul>
        <li><code>UTL_I18N.STRING_TO_RAW</code> ‚Üí text a RAW</li>
        <li><code>RAWTOHEX</code> ‚Üí RAW a hexadecimal</li>
        <li><code>UTL_I18N.RAW_TO_CHAR</code> ‚Üí RAW a text</li>
    </ul>

    <h3>üíæ TDE ‚Äì Transparent Data Encryption</h3>
    <p>Xifrat autom√†tic a nivell de disc. No cal modificar el codi de les aplicacions.</p>

    <h4> Components:</h4>
    <ul>
        <li><strong>TDE Master Key</strong> ‚Üí clau mestra</li>
        <li><strong>Keystore (Wallet)</strong> ‚Üí arxiu amb claus</li>
        <li><strong>Column / Tablespace Keys</strong> ‚Üí claus espec√≠fiques</li>
    </ul>

    <h4>üîÅ Modalitats:</h4>
    <ul>
        <li><strong>Column-level TDE</strong>: nom√©s algunes columnes</li>
        <li><strong>Tablespace-level TDE</strong>: totes les dades dins l‚Äôespai de taules</li>
    </ul>


    <h3> Bones pr√†ctiques</h3>
    <ul>
        <li>Xifra nom√©s les dades sensibles</li>
        <li>Evita BASE64 o ROT13 per contrasenyes</li>
        <li>Usa funcions <code>HASH()</code> per emmagatzemar contrasenyes</li>
        <li>Gestiona la keystore amb seguretat</li>
        <li>Audita l‚Äôacc√©s a dades xifrades</li>
    </ul>

    <h3> Conclusi√≥</h3>
    <p>L‚Äôencriptaci√≥ √©s essencial per a la protecci√≥ de dades en entorns reals i √©s un requisit legal i de bones pr√†ctiques. Oracle ofereix solucions potents com TDE i DBMS_CRYPTO que cobreixen necessitats t√®cniques i legals.</p>

    <blockquote>
        üîê Una bona gesti√≥ de claus, un √∫s moderat del xifrat i l‚Äôauditoria d‚Äôacc√©s s√≥n claus per garantir seguretat real.
    </blockquote>
    </section>
         

  <section id="auditoria">
    <h2>üïµÔ∏è Auditoria en Oracle</h2>
  
    <h3>üìò Qu√® √©s una auditoria?</h3>
    <p>
      L‚Äôauditoria √©s una funcionalitat dels sistemes gestors de bases de dades que permet <strong>registrar i controlar l‚Äôactivitat dels usuaris</strong>.
      √âs especialment √∫til per motius de seguretat, detecci√≥ d‚Äôerrors, tra√ßabilitat i compliment normatiu (ex. RGPD).
    </p>
  
    <h3>üéØ Objectius de l‚Äôauditoria</h3>
    <ul>
      <li> Detectar accions no autoritzades</li>
      <li> Rastrejar canvis o acc√©s a dades sensibles</li>
      <li> Monitorar l‚Äôactivitat d‚Äôusuaris privilegiats</li>
      <li> Complir amb auditories internes o externes</li>
    </ul>
  
    <h3>‚öôÔ∏è Tipus d‚Äôauditoria en Oracle</h3>
    <ul>
      <li><strong>Est√†ndard (traditional)</strong>: basada en ordres com <code>AUDIT</code></li>
      <li><strong>Auditoria unificada (Unified Audit)</strong>: disponible des d‚ÄôOracle 12c</li>
    </ul>
  
    <h4>üîé Difer√®ncies:</h4>
    <table border="1">
      <thead><tr><th>Caracter√≠stica</th><th>Est√†ndard</th><th>Unificada</th></tr></thead>
      <tbody>
        <tr><td>Implementaci√≥</td><td>Bases separades (AUD$)</td><td>Totes les auditories integrades</td></tr>
        <tr><td>Activa per defecte</td><td>No</td><td>S√≠, des de 12c</td></tr>
        <tr><td>Control granular</td><td>Limitat</td><td>Molt flexible</td></tr>
        <tr><td>Millor rendiment</td><td>No</td><td>S√≠</td></tr>
      </tbody>
    </table>
  
    <h3>üõ†Ô∏è Activar auditoria est√†ndard</h3>
    <pre>
-- Activar l‚Äôauditoria global
AUDIT TRAIL;
      </pre>
      <p>
        S‚Äôha de configurar el par√†metre:
        <code>audit_trail = DB</code> al fitxer d‚Äôinici <code>init.ora</code> o via <code>ALTER SYSTEM</code>
      </p>
    
      <h3> Exemples d'ordres <code>AUDIT</code></h3>
      <pre>
-- Audita l‚Äôacc√©s a taula
AUDIT SELECT ON alumnes;

-- Audita connexions fallides
AUDIT SESSION WHENEVER NOT SUCCESSFUL;

-- Audita qualsevol modificaci√≥ de taula
AUDIT INSERT, UPDATE, DELETE ON alumnes;
      </pre>
    
      <h3> Consultar resultats d‚Äôauditoria</h3>
      <ul>
        <li><code>DBA_AUDIT_TRAIL</code>: acc√©s general</li>
        <li><code>USER_AUDIT_TRAIL</code>: acc√©s nom√©s al propi esquema</li>
        <li><code>DBA_COMMON_AUDIT_TRAIL</code>: auditories unificades</li>
      </ul>
    
      <pre>
SELECT username, action_name, obj_name, timestamp
FROM dba_audit_trail
WHERE obj_name = 'ALUMNES';
      </pre>
    
      <h3>üßπ Esborrar o buidar resultats (amb compte!)</h3>
      <pre>
DELETE FROM sys.aud$ WHERE obj$name = 'ALUMNES';
-- o
TRUNCATE TABLE sys.aud$;
      </pre>
    
      <h3> Unified Audit (Oracle 12c+)</h3>
      <p>
        Unifica tots els registres d‚Äôauditoria: privilegis, ordres, errors, logons...  
        S‚Äôactiva amb <code>ENABLE_UNIFIED_AUDIT = TRUE</code> al par√†metre de sistema.
      </p>
    
      <h4>Exemple de pol√≠tica unificada:</h4>
      <pre>
CREATE AUDIT POLICY acces_alumnes
  ACTIONS SELECT ON alumnes;

AUDIT POLICY acces_alumnes;
      </pre>
    
      <h3>üì¶ Vistes d‚Äôauditoria unificada</h3>
      <ul>
        <li><code>UNIFIED_AUDIT_TRAIL</code></li>
        <li><code>DBA_AUDIT_POLICIES</code></li>
        <li><code>DBA_OBJ_AUDIT_OPTS</code></li>
      </ul>
    
      <h3> Consells de seguretat i gesti√≥</h3>
      <ul>
        <li> Activa l‚Äôauditoria per accions sensibles (login, esborrar, canviar permisos)</li>
        <li> Revisa regularment els registres d‚Äôauditoria</li>
        <li> No deixis l‚Äôauditoria oberta en producci√≥ sense revisar l‚Äôespai</li>
        <li> Automatitza l‚Äôan√†lisi amb scripts o informes</li>
      </ul>
    
      <h3> Conclusi√≥</h3>
      <p>
        L‚Äôauditoria √©s una eina potent per a la seguretat i el control de bases de dades Oracle.  
        Permet identificar comportaments sospitosos, controlar acc√©s no autoritzat i mantenir la tra√ßabilitat de les operacions.
        A m√©s, √©s una pr√†ctica recomanada per normatives legals i de qualitat.
      </p>
    </section>
      
 <!--     <section id="exercici-auditoria">
        <h2>üß™ Exercici interactiu de simulaci√≥ d‚Äôauditoria Oracle</h2>
        <p>Introdueix ordres d‚Äôauditoria o consultes per veure qu√® s‚Äôhauria registrat.</p>
      
        <textarea id="inputSQL" rows="5" style="width: 100%;" placeholder="Escriu una ordre, ex:
      AUDIT SELECT ON alumnes;
      SELECT * FROM dba_audit_trail WHERE obj_name = 'ALUMNES';"></textarea>
      
        <button onclick="executarSimulacio()">Executar</button>
      
        <div id="resultatSimulacio" style="margin-top: 20px; background: #f4f4f4; padding: 1rem; border-radius: 6px;"></div>
      
        <script>
          const auditories = [];
      
          function executarSimulacio() {
            const entrada = document.getElementById('inputSQL').value.trim().toUpperCase();
            const output = document.getElementById('resultatSimulacio');
            let resposta = "";
      
            if (entrada.startsWith("AUDIT ")) {
              const accio = entrada.replace("AUDIT", "").trim();
              auditories.push({
                accio: accio,
                usuari: "USUARI1",
                objecte: accio.includes("ON") ? accio.split("ON")[1].trim() : "GLOBAL",
                timestamp: new Date().toLocaleString()
              });
              resposta = `<b>‚úÖ Auditoria activada correctament:</b> <code>${accio}</code>`;
            } else if (entrada.startsWith("SELECT") && entrada.includes("DBA_AUDIT_TRAIL")) {
              if (auditories.length === 0) {
                resposta = "üì≠ No s'ha registrat cap acci√≥ encara.";
              } else {
                resposta = "<table border='1' cellpadding='6'><thead><tr><th>Usuari</th><th>Acci√≥</th><th>Objecte</th><th>Hora</th></tr></thead><tbody>";
                auditories.forEach(a =>
                  resposta += `<tr><td>${a.usuari}</td><td>${a.accio}</td><td>${a.objecte}</td><td>${a.timestamp}</td></tr>`
                );
                resposta += "</tbody></table>";
              }
            } else {
              resposta = "‚ö†Ô∏è Ordre no reconeguda. Pots usar <code>AUDIT ...</code> o <code>SELECT * FROM DBA_AUDIT_TRAIL</code>.";
            }
      
            output.innerHTML = resposta;
          }
        </script>
      </section>  -->
      

      <section id="integritat">
        <h2>üß¨ Integritat en bases de dades Oracle</h2>
      
        <h3>üìò Qu√® √©s la integritat?</h3>
        <p>
          La <strong>integritat</strong> d‚Äôuna base de dades fa refer√®ncia al conjunt de normes i restriccions que garanteixen que les dades emmagatzemades siguen <strong>coherents, correctes i fiables</strong>.
          Aquesta integritat √©s fonamental per garantir la <strong>qualitat de la informaci√≥</strong> i el correcte funcionament de les aplicacions que la utilitzen.
        </p>
      
        <h3> Tipus d‚Äôintegritat</h3>
        <ul>
          <li><strong>Integritat d‚Äôentitat</strong> ‚Üí cada fila ha de ser identificable de forma √∫nica (clau prim√†ria)</li>
          <li><strong>Integritat referencial</strong> ‚Üí assegura la coher√®ncia entre taules relacionades (claus foranes)</li>
          <li><strong>Integritat de domini</strong> ‚Üí les dades han de complir certs valors o formats (tipus de dades, CHECK...)</li>
          <li><strong>Integritat d‚Äôusuari</strong> ‚Üí validacions aplicacionals o de negoci imposades per l'usuari o aplicaci√≥</li>
        </ul>
      
        <h3> Integritat d'entitat</h3>
        <p>
          Es garanteix mitjan√ßant l‚Äô√∫s de <code>PRIMARY KEY</code>, que assegura que cada fila sigui √∫nica i no nul¬∑la.
        </p>
        <pre>CREATE TABLE alumnes (
  id NUMBER PRIMARY KEY,
  nom VARCHAR2(50)
);          </pre>
      
        <h3> Integritat referencial</h3>
        <p>
          Mant√© la coher√®ncia entre dues taules relacionades mitjan√ßant una <code>FOREIGN KEY</code>.  
          Evita que una fila faci refer√®ncia a un valor inexistent.
        </p>
        <pre>CREATE TABLE cursos (
  id NUMBER PRIMARY KEY,
  nom VARCHAR2(50)
);

CREATE TABLE alumnes (
  id NUMBER PRIMARY KEY,
  nom VARCHAR2(50),
  id_curs NUMBER,
  FOREIGN KEY (id_curs) REFERENCES cursos(id)
);          </pre>
      
        <p>Amb aix√≤, no es pot assignar un <code>id_curs</code> a un alumne que no existeixi a la taula <code>cursos</code>.</p>
      
        <h3> Integritat de domini</h3>
        <p>
          Limita els valors permesos en una columna. Es pot implementar amb tipus de dades, restriccions <code>NOT NULL</code>, <code>CHECK</code> o <code>DEFAULT</code>.
        </p>
      
        <pre>CREATE TABLE alumnes (
  id NUMBER PRIMARY KEY,
  nom VARCHAR2(50) NOT NULL,
  edat NUMBER CHECK (edat >= 16),
  pais VARCHAR2(30) DEFAULT 'Espanya'
);           </pre>
      
        <p>
          Aix√≤ garanteix que <code>nom</code> sempre tindr√† valor, <code>edat</code> sigui ‚â• 16 i <code>pais</code> tindr√† un valor per defecte.
        </p>
      
        <h3> Integritat d‚Äôusuari</h3>
        <p>
          No s‚Äôimplementa a nivell de base de dades, sin√≥ via aplicacions o triggers. Controla normes espec√≠fiques com:
        </p>
        <ul>
          <li>Un usuari no pot tenir dues reserves actives</li>
          <li>Els horaris d‚Äôuna aula no poden solapar-se</li>
        </ul>
      
        <p>
          Aquest tipus d‚Äôintegritat sovint es basa en <code>PL/SQL</code> o l√≤gica de negoci a l‚Äôaplicaci√≥.
        </p>
      
        <h3> Conclusi√≥</h3>
        <p>
          Mantenir la integritat de les dades √©s essencial per garantir que el sistema sigui <strong>fiable, coherent i funcional</strong>.  
          Oracle ofereix m√∫ltiples mecanismes per implementar integritat a nivell f√≠sic, l√≤gic i d‚Äôaplicaci√≥.
        </p>
      
        <blockquote>
          üîê ‚ÄúLa seguretat comen√ßa amb la confian√ßa en les dades. I la confian√ßa es construeix amb integritat.‚Äù
        </blockquote>
      </section>
      

      <section id="transaccions">
        <h2> Transaccions en Oracle</h2>
      
        <h3>üìò Qu√® √©s una transacci√≥?</h3>
        <p>
          Una <strong>transacci√≥</strong> √©s una seq√º√®ncia d‚Äôoperacions SQL (normalment de manipulaci√≥ de dades: <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>) que es tracten com una <strong>unitat indivisible de treball</strong>.
          L‚Äôobjectiu d‚Äôuna transacci√≥ √©s assegurar que les dades es mantinguin <strong>coherents</strong> i <strong>integrades</strong>.
        </p>
        <p>Una transacci√≥, o es fa tota o no es fa res, per√≤ no pot en cap cas quedar a mitges, una part feta i una altra no.</p>
        <p>Totes les operacions que en formen part han de completar-se correctament. Si alguna falla, cap de les altres no ha de tenir efecte.</p>

        <h3> Propietats d‚Äôuna transacci√≥ (ACID)</h3>
        <ul>
          <li><strong>Atomicitat:</strong> totes les operacions s‚Äôexecuten o cap (tot o res)</li>
          <li><strong>Consist√®ncia:</strong> deixa la BD en un estat v√†lid despr√©s de completar-se</li>
          <li><strong>A√Øllament:</strong> cada transacci√≥ s‚Äôexecuta com si fos l‚Äô√∫nica</li>
          <li><strong>Durabilitat:</strong> un cop feta la transacci√≥, els canvis s√≥n permanents</li>
        </ul>
      
        <h3> Ordres b√†siques de control de transaccions</h3>
      
        <h4> <code>COMMIT</code></h4>
        <p>
          Fa permanents tots els canvis realitzats en la transacci√≥. No es poden desfer despr√©s.
        </p>
        <pre>INSERT INTO alumnes VALUES (10, 'Joan', 20);
COMMIT;          </pre>
      
        <h4> <code>ROLLBACK</code></h4>
        <p>
          Desf√† tots els canvis realitzats des del darrer <code>COMMIT</code>. Torna l‚Äôestat de la BD a com estava abans.
        </p>
        <pre>UPDATE alumnes SET edat = 30 WHERE id = 10;
ROLLBACK; -- Anul¬∑la l'actualitzaci√≥            </pre> 
      
        <h4> <code>SAVEPOINT</code></h4>
        <p>
          Permet definir punts intermedis dins d‚Äôuna transacci√≥ per fer <code>ROLLBACK</code> parcial.
        </p>
        <pre>SAVEPOINT punt1;
DELETE FROM alumnes WHERE edat &lt; 18;

SAVEPOINT punt2;
UPDATE alumnes SET nom = 'An√≤nim' WHERE edat &gt; 25;

ROLLBACK TO punt1; -- desf√† nom√©s fins al punt1           </pre>
      
        <h3> Transaccions autom√†tiques i manuals</h3>
        <ul>
          <li>En entorns interactius (SQL*Plus, Oracle SQL Developer), cada ordre √©s una transacci√≥ si s‚Äôexecuta amb <code>AUTOCOMMIT</code>.</li>
          <li>En entorns de producci√≥, es recomana el control manual mitjan√ßant blocs <code>BEGIN</code> ... <code>END</code>.</li>
        </ul>
      
        <h3> Consells pr√†ctics</h3>
        <ul>
          <li> Fes <code>COMMIT</code> nom√©s quan estiguis segur que la transacci√≥ ha anat b√©</li>
          <li> Utilitza <code>SAVEPOINT</code> per controlar operacions complexes</li>
          <li> Usa <code>ROLLBACK</code> sempre que detectis un error o canvi involuntari</li>
          <li> En entorns multiusuari, la gesti√≥ correcta de transaccions evita bloquejos i inconsist√®ncies</li>
        </ul>
      
        <h3> Relaci√≥ amb la seguretat</h3>
        <p>
          Una gesti√≥ acurada de les transaccions garanteix:
        </p>
        <ul>
          <li> Tra√ßabilitat i reversibilitat en cas d‚Äôerror</li>
          <li> Integritat davant fallades del sistema</li>
          <li> Registre coherent en conjunci√≥ amb l‚Äôauditoria</li>
        </ul>
      
        <h3> Conclusi√≥</h3>
        <p>
          El control de transaccions √©s una eina fonamental per garantir que el sistema de base de dades sigui <strong>segur, coherent i robust</strong>.
          Oracle proporciona instruccions clares per controlar de forma manual i segura l‚Äôexecuci√≥ de canvis en les dades.
        </p>

        <h3> Exemple</h3>
        <p>Obrim 2 sessions ( en SQL*PLUS ) amb usuari1 ( dos cmd diferents)   </p>
        <pre> 
    En la primera sessi√≥ (1er CMD)
    SQL> insert into prueba10 (id, nom) values (1000,‚Äôvalor1 ‚Äô);
    1 row created.
        </pre>
    <pre>
    En la segon sessi√≥  (2on cmd)    
    SQL> select count(*) from prueba10;
    COUNT(*)
    ----------
    0</pre>
        <pre>
    En la primera sessi√≥ (1er CMD)
    SQL> commit;            
        </pre>
    <pre>
    En la segon sessi√≥ (2on CMD)    
    SQL> select count(*) from prueba10;
    COUNT(*)
    ----------
    1
    </pre>

   </section>
      

      <section id="backups">
        <h2>üíæ Recuperaci√≥ i c√≤pies de seguretat en Oracle</h2>
      
        <h3> Per qu√® cal fer c√≤pies de seguretat?</h3>
        <p>
          Les c√≤pies de seguretat s√≥n essencials per garantir la <strong>continu√Øtat del servei</strong> i la <strong>protecci√≥ de la informaci√≥</strong>.  
          En cas de fallada del sistema, error hum√†, corrupci√≥ de dades o atacs, una bona estrat√®gia de backup permet recuperar la base de dades sense p√®rdues.
        </p>
        <p>La q√ºesti√≥ de fer c√≤pies de seguretat des de dins d‚ÄôOracle (usant eines com RMAN o exportacions l√≤giques com Data Pump) 
          versus fer-les des de fora (copiant fitxers del sistema operatiu) √©s molt important perqu√® afecta 
          la consist√®ncia i la recuperabilitat de la base de dades</p>
        <p>Fer c√≤pies de seguretat des de dins d‚ÄôOracle √©s cr√≠tic perqu√® assegura que la base de dades es pugui recuperar correctament i 
          sense p√®rdua de dades, fins i tot si est√† en funcionament. Fer-ho des del sistema operatiu nom√©s √©s segur si la base est√† apagada,
           cosa poc pr√†ctica en entorns de producci√≥</p>
        <p>Problemes si es fan des de fora del SGBD: Inconsist√®ncia, Recuperaci√≥ complicada, No registra transaccions </p>
        <p>Avantatges si es fan des de dins del SGBD: Consist√®ncia de dades, Recuperaci√≥ puntual, Gesti√≥ de logs autom√†tica, C√≤pies en calent, Automatitzaci√≥ i verificaci√≥:</p>

      
        <h3>üéØ Objectius d‚Äôuna c√≤pia de seguretat</h3>
        <ul>
          <li>Restaurar les dades despr√©s d‚Äôun error</li>
          <li>Permetre la recuperaci√≥ puntual o total</li>
          <li>Facilitar entorns de prova o migracions</li>
          <li>Complir normatives legals (protecci√≥ de dades)</li>
        </ul>
      
        <h3> Tipus de c√≤pies de seguretat</h3>
        <ul>
          <li><strong>F√≠siques</strong>: c√≤pies dels fitxers f√≠sics (datafiles, control files, logs...)</li>
          <li><strong>L√≤giques</strong>: exportaci√≥ d‚Äôesquemes, taules, usuaris o dades via utilitats com <code>expdp</code> i <code>impdp</code></li>
        </ul>
      
        <h3> Estrat√®gies de backup</h3>
        <ul>
          <li><strong>Completa:</strong> c√≤pia total de la BD</li>
          <li><strong>Incremental:</strong> nom√©s les dades modificades des del darrer backup</li>
          <li><strong>Diferencial:</strong> totes les modificacions des del darrer backup complet</li>
          <li><strong>Continuada:</strong> amb redologs i archivelogs actius</li>
        </ul>
      <h3> Mecanismes d'Oralce</h3>
        <ul>
          <li><strong>Exportaci√≥:</strong> la c√≤pia l√≤gica es guarda en l‚Äôequip client</li>
          <li><strong>DataPump:</strong> la c√≤pia l√≤gica es guarda en l‚Äôequip servidor</li>
          <li><strong>RMAN:</strong> la c√≤pia f√≠sica o incremental es guarda en l‚Äôequip servidor</li>
        </ul>

        <hr><h3> Eines principals de backup en Oracle</h3>
       <h4>1. üì§ Exportaci√≥ i importaci√≥ legacy (Original Export))</h4>
        <pre>exp / imp</pre>
        <ul>
          <li>S'executa des de la l√≠nia de comandos/terminal</li>
          <li>La c√≤pia l√≤gica es guarda en l‚Äôequip des d'on s'executa  (sol ser client)</li>
          <li>Modes: full, user (esquema), tablespace, table, query</li>
          <li>Es pot usar un fitxer de par√†metres parfile=</li>
        </ul>
        <pre>EXEMPLE
exp username/password@ipAddress:portNumber/serviceName file=/recovery_area/export/prueba_export.dmp full=yes buffer=1000000          
        </pre>
        <p>Si volem fer un exp total (full=yes), l'usuari que l'execute necessita el rol EXP_FULL_DATABASE</p>
        <pre>Per cridar amb sys
exp \'username/password@instance AS SYSDBA\' parametres</pre>        


        <hr><h4>2. üì§ Data Pump</h4>
        <pre>expdp / impdp</pre>
        <ul>
          <li>S'executa des de la linea de comandos/terminal (per√≤ la c√≤pia s'executa en el servidor)</li>
          <li>Tamb√© es pot executar des de dins de l'SGBD amb el paquet DBMS_DATAPUMP (pr√≤xim tema )</li>
          <li>La c√≤pia l√≤gica es guarda en l'equip servidor (o un lloc assolible des del servidor)</li>
          <li>M√©s r√†pid, m√©s rendiment, diversos fils en paral¬∑lel</li>
          <li>Modes: full=Y, eschemas=esquema_1[, esquema_N], tablespaces=, tables=, QUERY=</li>
          <li>Es pot usar un fitxer de par√†metres parfile=</li>
        </ul>
       <pre>
-- EXEMPLE    
-- Guardar tot un esquema (tots els objectes d'un usuari)
expdp username/password@ipAddress:portNumber/serviceName directory=dumpdir dumpfile=export.dmp logfile=fichero.log
expdp usuari/password SCHEMAS=usuari DUMPFILE=export.dmp LOGFILE=export.log   --No cal posar path f√≠sic !!

-- Recuperar en una altra BD
impdp usuari/password DUMPFILE=export.dmp LOGFILE=import.log           </pre>

        <ul> Que es pot guardar / recuperar  (mode)
          <li>Tot: FULL=Y</li>
          <li>Una o m√©s Tablespaces:  TABLESPACES=tb1[,...]</li>
          <li>Un o m√©s esquemes: SCHEMAS= usuari1 [,...] </li>
          <li>Una o m√©s taules: TABLE= taula1 [,...]</li>
          <li>Una part d'una taula:  QUERY [usuari.taula:] WHERE ....</li>
        </ul>

        <p>Es necessari que el servidor tinga acc√©s al lloc on far√† (el servidor) les c√≤pies</p>
        <p>Primer: Definir un directori </p>
        <pre>CREATE [OR REPLACE] DIRECTORY directory_name AS 'path_name';</pre>
        <p>El path deu existir i tindre permisos d'escriptura</p>
        <p>Els fitxers de dest√≠ NO deuen existir (o donar√† error la c√≤pia)</p>
        <p>L'usuari que connecta ha de tindre permisos d'acc√©s a les dades per fer c√≤pies</p>
        <p>Per fer una c√≤pia completa es necessita un perm√≠s (ROL) concret</p>
        <pre>DATAPUMP_EXP_FULL_DATABASE
DATAPUMP_IMP_FULL_DATABASE    </pre>

          <pre>EXEMPLE d'arxiu 'parfile'
TABLESPACES=users
DUMPFILE=exp2.dmp
DIRECTORY=dirdump
LOGFILE=exp2.log            </pre>

       <hr> <h4>3. üîÑ RMAN (Recovery Manager)</h4>
        <p>
          Eina oficial d'Oracle per fer backups i recuperar dades. Pot treballar amb c√≤pies incrementals, verificar integritat i automatitzar tasques.
        </p>
        <pre>
      -- Exemple: backup complet
      RMAN> BACKUP DATABASE;
      
      -- Backup nom√©s de la part SYSTEM
      RMAN> BACKUP TABLESPACE system;
      
      -- Recuperaci√≥
      RMAN> RESTORE DATABASE;
      RMAN> RECOVER DATABASE;
        </pre>
      

        <h3>üìã Exemple de procediment b√†sic amb RMAN</h3>
        <pre>
      -- Connexi√≥
      rman target /
      
      -- Comprovaci√≥ de c√≤pia
      VALIDATE DATABASE;
      
      -- C√≤pia
      BACKUP AS BACKUPSET DATABASE PLUS ARCHIVELOG;
      
      -- Restauraci√≥
      RESTORE DATABASE;
      RECOVER DATABASE;
        </pre>
        <hr>
        <h3> Arxius implicats en la recuperaci√≥</h3>
        <ul>
          <li><strong>Datafiles:</strong> contenen les dades</li>
          <li><strong>Control file:</strong> descriu l'estructura de la BD</li>
          <li><strong>Redo logs:</strong> registren tots els canvis</li>
          <li><strong>Archivelogs:</strong> c√≤pia dels redo logs, essencial per a recuperaci√≥ completa</li>
        </ul>
      
        <h3> Escenaris de recuperaci√≥</h3>
        <ul>
          <li> Recuperaci√≥ completa: amb tots els archivelogs i datafiles</li>
          <li> Recuperaci√≥ parcial: taules, fitxers o inst√†ncia</li>
          <li> Restauraci√≥ en cas de p√®rdua del control file</li>
        </ul>
      
        <h3> Bones pr√†ctiques de seguretat</h3>
        <ul>
          <li> Programar backups regulars</li>
          <li> Mantenir c√≤pies en ubicacions externes</li>
          <li> Fer proves peri√≤diques de recuperaci√≥</li>
          <li> Utilitzar <code>RMAN VALIDATE</code> per comprovar integritat</li>
          <li> Documentar el procediment de recuperaci√≥</li>
        </ul>        
      
        <h3> Conclusi√≥</h3>
        <p>
          Disposar d‚Äôun pla de c√≤pies de seguretat fiable i efectiu √©s <strong>fonamental per garantir la seguretat i continu√Øtat</strong> de qualsevol sistema basat en Oracle.
          Les eines com RMAN i Data Pump permeten adaptar-se a m√∫ltiples escenaris, i una bona estrat√®gia de backup ha d‚Äôestar acompanyada d‚Äôuna pol√≠tica de recuperaci√≥ clara.
        </p>
      </section>
      

      <section id="normativa-vigent">
        <h2>‚öñÔ∏è Normativa vigent en mat√®ria de protecci√≥ de dades</h2>
      
        <h3>üìò Qu√® √©s la normativa de protecci√≥ de dades?</h3>
        <p>
          √âs el conjunt de lleis i regulacions que tenen com a objectiu <strong>garantir la privadesa i la seguretat de les dades personals</strong> que gestionen les empreses i organitzacions.
          Afecta directament la gesti√≥ dels sistemes d‚Äôinformaci√≥, especialment els que contenen bases de dades amb informaci√≥ de persones f√≠siques.
        </p>
      
        <h3>üá™üá∫ Reglament General de Protecci√≥ de Dades (RGPD)</h3>
        <ul>
          <li><strong>Nom complet:</strong> Reglament (UE) 2016/679 del Parlament Europeu i del Consell</li>
          <li><strong>Aplicaci√≥:</strong> obligat√≤ria a tots els estats membres de la Uni√≥ Europea des del 25 de maig de 2018</li>
          <li><strong>Objectiu:</strong> protegir els drets fonamentals de les persones pel que fa al tractament de les seves dades personals</li>
        </ul>
      
        <h4> Principis b√†sics del RGPD</h4>
        <ul>
          <li> L√≠cit, lleial i transparent</li>
          <li> Finalitat determinada i leg√≠tima</li>
          <li> Minimitzaci√≥ de dades</li>
          <li> Exactitud</li>
          <li> Limitaci√≥ de conservaci√≥</li>
          <li> Integritat i confidencialitat</li>
          <li> Responsabilitat proactiva</li>
        </ul>
      
        <h4>üë• Drets de les persones usu√†ries</h4>
        <ul>
          <li> Dret d‚Äôacc√©s</li>
          <li> Dret de rectificaci√≥</li>
          <li> Dret de supressi√≥ (‚Äúdret a l‚Äôoblit‚Äù)</li>
          <li> Dret d‚Äôoposici√≥</li>
          <li> Dret a la limitaci√≥ del tractament</li>
          <li> Dret a la portabilitat de dades</li>
        </ul>
      
        <h3>üá™üá∏ LOPDGDD ‚Äì Llei org√†nica 3/2018</h3>
        <p>
          A Espanya, la normativa RGPD es complementa amb la LOPDGDD:
        </p>
        <ul>
          <li><strong>Nom complet:</strong> Llei Org√†nica 3/2018 de Protecci√≥ de Dades Personals i garantia dels drets digitals</li>
          <li><strong>Objectiu:</strong> adaptar el RGPD a l‚Äôordenament jur√≠dic espanyol i afegir drets digitals</li>
        </ul>
      
        <h4> Alguns punts destacats de la LOPDGDD</h4>
        <ul>
          <li> Designaci√≥ d‚Äôun Delegat de Protecci√≥ de Dades (DPO) en determinades entitats</li>
          <li> Mesures de seguretat segons el risc de les dades tractades</li>
          <li> Registre d‚Äôactivitats de tractament</li>
          <li> Avaluaci√≥ d‚Äôimpacte quan hi ha risc elevat</li>
          <li> Drets digitals: educaci√≥ digital, neutralitat, desconnexi√≥ laboral, etc.</li>
        </ul>
      
        <h3> Obligacions t√®cniques relacionades amb bases de dades</h3>
        <ul>
          <li> Control d‚Äôacc√©s i permisos per rols</li>
          <li> Auditories d‚Äôacc√©s a dades personals</li>
          <li> Registre de canvis i transaccions</li>
          <li> C√≤pies de seguretat i plans de recuperaci√≥</li>
          <li> Encriptaci√≥ de dades sensibles</li>
        </ul>

        <h3>Drets ARCO</h3>
        <ul>
          <li> Acc√©s</li>
          <li> Rectificaci√≥</li>
          <li> Cancel¬∑laci√≥</li>
          <li> Oposici√≥</li>
        </ul>

        <h3>Paper del SGBD</h3>
        <ul>
            <li> Gesti√≥ d‚Äôusuaris i permisos</li>
            <li>Sistemes de recuperaci√≥</li>
            <li>  RI</li>
            <li>Encriptaci√≥ (informaci√≥ sensible)</li>
            <li>   Auditoria </li>
        </ul>

        <h3>Classificar informaci√≥</h3>
            <ul>
                <li>Nivell b√†sic</li>
                <li> Nivell mig</li>
                <li>Nivell alt </li>
            </ul>
        <h4 style="color:red">Els procediments han d‚Äôestar documentats i supervisats per poder garantir el compliment de la normativa i la llei.</h4>
      
        <h3>üìä Sancions per incompliment</h3>
        <p>
          El RGPD preveu sancions de fins al <strong>4% del volum de negoci anual global</strong> o <strong>20 milions d‚Äôeuros</strong>, segons quina sigui m√©s elevada.
        </p>
      
        <h3> Conclusi√≥</h3>
        <p>
          Tant el <strong>RGPD</strong> com la <strong>LOPDGDD</strong> estableixen un marc normatiu estricte i necessari per protegir les dades personals.
          A l‚Äôhora d‚Äôadministrar bases de dades, cal assegurar-se que:
        </p>
        <ul>
          <li>Les dades sensibles estan ben protegides</li>
          <li>Nom√©s hi accedeix qui est√† autoritzat</li>
          <li>Es poden tra√ßar les operacions sobre dades personals</li>
          <li>Es poden complir els drets dels usuaris</li>
        </ul>
      
        <blockquote>
          ‚öñÔ∏è ‚ÄúUna base de dades segura no nom√©s √©s eficient, sin√≥ tamb√© legalment responsable.‚Äù
        </blockquote>
      </section>
            



  <section id="altres-recursos">
    <h2>Altres recursos</h2>
    
  </section>
 
</main>

<script>

// Per poder copiar codi en el porta-retalls. S'ha de posar un bot√≥ en cada <pre>
      //  <div class="pre-container">
      //    <button class="copy-button">Copia Codi !</button>
  document.addEventListener('DOMContentLoaded', function () {
    const buttons = document.querySelectorAll('.copy-button');

    buttons.forEach(button => {
      button.addEventListener('click', function () {
        const code = this.nextElementSibling.innerText;
        navigator.clipboard.writeText(code).then(() => {
          this.innerText = ' ‚úî Copiat!';
          setTimeout(() => this.innerText = 'Copia Codi !', 3000);
        });
      });
    });
  });

</script>

</body>
</html>

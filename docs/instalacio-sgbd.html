<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8">
  <title>📦 Instal·lació Oracle</title>
  <link rel="stylesheet" href="estilsunitats.css">
  <link rel="stylesheet" href="https://cdn.hugeicons.com/font/hgi-stroke-rounded.css" />
</head>
<body>

<header>
  <a href="index.html">
    <!--<img src="https://upload.wikimedia.org/wikipedia/commons/5/50/Oracle_logo.svg" alt="Oracle Logo"> -->
    <img src="imgs/ASGBD.png" alt="Mòdul ASGBD">
  </a>
  <h1>ASGBD   -    Instal·lació Oracle</h1>
</header>

<nav>
  <h3>Índex</h3>
  <a href="#edicions">Edicions</a>
  <a href="#versions">Versions</a>
  <a href="#requisits">Requisits</a>
  <a href="#instancia">Instància</a>
  <a href="#arquitectura">Arquitectura</a>
  <a href="#ofa">OFA</a>
  <a href="#instalacio">Instal·lació Oracle</a>
  <a href="#acces">Accés a Oracle</a>
  <a href="#pdb">Creació de PDB manualment</a>
  <a href="#conclusions">Conclusions</a>
  <a href="#altres-recursos">Altres Recursos</a>
</nav>

<main>


  
  <section id="edicions">
    <h2>Edicions d'Oracle Database</h2>
  
    <h3>🧾 Què és una edició?</h3>
    <p>
      Una <strong>edició</strong> d’Oracle Database fa referència a un conjunt de característiques i capacitats disponibles segons el perfil de l’usuari (empresa, educació, desenvolupador...).
      Cada edició té un cost, unes limitacions i uns usos recomanats.
    </p>
  
    <h3> Edicions disponibles</h3>
    <ul>
      <li><strong>Enterprise Edition (EE)</strong> – Completa i orientada a empreses grans. Inclou totes les funcionalitats.</li>
      <li><strong>Standard Edition (SE)</strong> – Per petites i mitjanes empreses. Algunes funcionalitats limitades.</li>
      <li><strong>Standard Edition One (SE1)</strong> – Versió anterior simplificada de SE (ja descontinuada).</li>
      <li><strong>Standard Edition 2 (SE2)</strong> – Substituta de SE1. Limitada a 2 sockets i 16 fils de CPU.</li>
      <li><strong>Express Edition (XE)</strong> – ✅ Gratuïta! Limitada en recursos (1 CPU, 2GB RAM, 12GB espai).</li>
      <li><strong>Personal Edition (PE)</strong> – Orientada a desenvolupadors, només disponible en Windows.</li>
      <li><strong>Lite Edition (LE)</strong> – Edició lleugera per a dispositius mòbils (molt poc utilitzada).</li>
      <li><strong>Oracle Database 23ai Free</strong> – ✅ Versió moderna gratuïta per a educació i proves, successora de XE.</li>
    </ul>
  
    <h3>☁️ Edicions Cloud</h3>
    <p>
      Oracle ofereix també les edicions anteriors com a serveis al núvol (Oracle Cloud Infrastructure) amb diversos nivells de rendiment i preu:
    </p>
    <ul>
      <li><strong>Cloud Service SE</strong></li>
      <li><strong>Cloud Service EE</strong></li>
      <li><strong>Cloud Service EE – High Performance</strong></li>
      <li><strong>Cloud Service EE – Extreme Performance</strong></li>
      <li><strong>Exadata Cloud Service</strong></li>
    </ul>
  
    <h3>⚙️ Tipus d’instal·lació (ús)</h3>
    <p>A més de l’edició, Oracle es pot desplegar amb diferents arquitectures d’instal·lació:</p>
    <ul>
      <li><strong>Standalone</strong> – Instal·lació simple en un sol host (més comuna)</li>
      <li><strong>Grid Infrastructure</strong> – Per suport a Oracle ASM i RAC</li>
      <li><strong>Oracle RAC (Real Application Cluster)</strong> – Per entorns de clúster amb alta disponibilitat</li>
      <li><strong>Oracle Autonomous Database</strong> – BD al núvol d'Oracle que utilitza intel·ligència artificial i aprenentatge automàtic per autogestionar-se</li>
    </ul>
  
    <h3> Recomanacions pràctiques</h3>
    <ul>
      <li> Per entorns de formació i desenvolupament: <strong>Express Edition (XE)</strong> o <strong>Oracle Free 23ai</strong></li>
      <li> Per empreses mitjanes: <strong>Standard Edition 2 (SE2)</strong></li>
      <li> Per empreses grans amb requisits avançats: <strong>Enterprise Edition (EE)</strong></li>
      <li> Per escalar i automatitzar: considera <strong>OCI Cloud Services</strong> amb RAC o Exadata</li>
    </ul>
  
    <h3>🔗 Recursos</h3>
    <ul>
      <li><a href="https://soyundba.com/2021/05/19/diferencias-entre-enterprise-standard-standard-one-personal-y-express/" target="_blank">Comparació entre edicions (SoyUnDBA)</a></li>
      <li><a href="https://www.oracle.com/database/free/" target="_blank">Oracle Free 23ai (oficial)</a></li>
      <li><a href="https://www.oracle.com/es/database/technologies/appdev/xe.html" target="_blank">Express Edition (21c XE)</a></li>
    </ul>
    <p class="tips">(Practica 🧪) <a href="https://github.com/EnriqueIborra/ASGBD/blob/6e076602d64271984c39ce27b6ddea544ff78443/UD1/desplegar%20ORACLEdb23%20sobre%20Docker_simplif.pdf" target="_blank">
       Primer contacte amb Oracle Database</a></p>
  </section>



  <section id="versions">
    <h2>Versions d’Oracle Database</h2>
  
    <h3>🧾 Què és una versió?</h3>
    <p>
      La <strong>versió</strong> d’Oracle fa referència a la numeració del programari que indica les funcionalitats disponibles, el motor de base de dades i el model d’arquitectura utilitzat.
      Exemples: <code>11g</code>, <code>12c</code>, <code>18c</code>, <code>19c</code>, <code>21c</code>, <code>23ai</code>
    </p>
  
    <h3>📋 Llista de versions populars</h3>
    <ul>
      <li> <strong>Oracle 11g</strong> – Última versió no multitenant (encara usada en entorns legacy)</li>
      <li> <strong>Oracle 12c</strong> – Introducció de l’arquitectura multitenant (CDB + PDB)</li>
      <li> <strong>Oracle 18c</strong> – Versió basada en la núvol (Oracle Autonomous)</li>
      <li> <strong>Oracle 19c</strong> – Versió LTS (Long Term Support), molt estable i actual</li>
      <li> <strong>Oracle 21c</strong> – Exclusivament multitenant (no es permet el model tradicional)</li>
      <li> <strong>Oracle 23ai</strong> – Orientada a AI i machine learning, versió més moderna i gratuïta disponible com a “Oracle Free”</li>
    </ul>
  


    <h3>📦 Tipus d’ús (instal·lació)</h3>
    <p>
      A més de la versió i edició, Oracle es pot instal·lar amb diferents modalitats de funcionament:
    </p>
    <ul>
      <li><strong>Standalone</strong> – Instal·lació típica en una sola màquina</li>
      <li><strong>Grid Infrastructure</strong> – Per suport a RAC (Real Application Cluster)</li>
      <li><strong>RAC</strong> – Clúster de múltiples nodes per alta disponibilitat i escalabilitat</li>
    </ul>
 
   
    <h3>⚠️ Consideracions importants</h3>
    <ul>
      <li> A partir d’Oracle <strong>21c</strong>, només es permet el model multitenant (CDB/PDB)</li>
      <li> És important triar la versió segons:
        <ul>
          <li>Compatibilitat amb l’arquitectura del sistema</li>
          <li>Suport a llarg termini (LTS)</li>
          <li>Requisits de seguretat, escalabilitat i disponibilitat</li>
        </ul>
      </li>
    </ul>
  
    <h3> Resum</h3>
    <ul>
      <li> La versió defineix la tecnologia i característiques disponibles</li>
      <li> A partir de 12c es recomana treballar amb CDB i PDB</li>
      <li> 19c és la versió estable més utilitzada en producció (fins avui)</li>
      <li> 23ai és una nova versió gratuïta orientada a innovació</li>
    </ul>
  </section>
  


  
  <section id="requisits">
    <h2>Requisits d’instal·lació</h2>
  
    <h3> Requisits teòrics</h3>
    <p>Aquests són els requisits oficials mínims especificats per Oracle per instal·lar la base de dades:</p>
  
    <h4> En Windows:</h4>
    <ul>
      <li> Mínim 1GB de memòria RAM</li>
      <li> 1GB d'espai en la carpeta temporal</li>
      <li> 8GB per a l’SGBD</li>
      <li> Espai addicional per a les BBDD</li>
      <li> Resolució gràfica 1024x768 amb 256 colors</li>
      <li> Connexió a Internet</li>
    </ul>
  
    <h4> En Linux:</h4>
    <ul>
      <li> Kernel compatible</li>
      <li> Swap igual a la mida de la RAM</li>
      <li> Requisits similars a Windows quant a espai i connexió</li>
    </ul>
  
    <p><em>Fonts oficials:</em></p>
    <ul>
      <li><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/ntdbi/operating-system-checklist-oracle-database-installation-microsoft-windows.html" target="_blank">Checklist Windows</a></li>
      <li><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/ladbi/operating-system-checklist-for-oracle-database-installation-on-linux.html" target="_blank">Checklist Linux</a></li>
    </ul>
  
    <h3> Requisits realistes</h3>
    <p>Per a una instal·lació funcional i estable, és recomanable:</p>
    <ul>
      <li> Almenys 2GB de RAM</li>
      <li> 2 processadors (CPU)</li>
      <li> 50GB disponibles per al sistema operatiu, Oracle i una BBDD</li>
      <li> Swap = 2 × RAM (en Linux)</li>
      <li> Resolució mínima: 1024x768 amb 256 colors</li>
      <li> Executar sempre com a administrador des de CMD</li>
    </ul>
  
    <h3> Eines i components importants</h3>
    <p>Durant la instal·lació s’inclouen diversos components:</p>
    <ul>
      <li><code>setup</code> – Instal·lador principal del software</li>
      <li><code>dbca</code> – Assistència per crear la BBDD (CDB/PDB)</li>
      <li><code>netca</code> – Configuració del listener de xarxa</li>
      <li><code>netmgr</code> – Gestor de connexions</li>
      <li><code>RMAN</code> – Eina per a còpies de seguretat</li>
      <li>Clients d'accés:
        <ul>
          <li>SQL*Plus</li>
          <li>SQL Developer</li>
          <li>SQLcl</li>
          <li>DBeaver</li>
          <li>Enterprise Manager (deprecated)</li>
        </ul>
      </li>
    </ul>
  
    <h3> Resum final</h3>
    <ul>
      <li> Els requisits oficials són suficients per provar, però no recomanables per producció</li>
      <li> És essencial tenir els components bàsics preparats abans de la instal·lació</li>
      <li>⚠️ La manca de swap o permisos d’admin pot impedir una instal·lació exitosa</li>
    </ul>
  </section>
  



 
  <section id="instancia">
    <h2>Instància</h2>
  
    <h3> Què és una instància Oracle?</h3>
    <p>
      Una <strong>instància</strong> d’Oracle és el conjunt de processos en segon pla (<em>background processes</em>) i estructures de memòria que gestionen l'accés a una base de dades Oracle.
    </p>
    <ul>
      <li> Cada vegada que s’inicia una instància, es crea automàticament una àrea de memòria global anomenada <strong>SGA</strong> (System Global Area)</li>
      <li> També es llancen diversos <strong>processos en background</strong> que gestionen l’entrada/sortida, la recuperació, el buffer cache, etc.</li>
      <li> Quan un usuari es connecta, se li assigna una àrea de memòria personal: la <strong>PGA</strong> (Program Global Area)</li>
    </ul>
  
    <h3> Components de memòria</h3>
    <ul>
      <li><strong>SGA</strong> – Àrea de memòria compartida entre tots els usuaris connectats a la instància</li>
      <li><strong>PGA</strong> – Àrea de memòria privada per cada sessió/usuari</li>
    </ul>
  
    <p>Es poden consultar amb les següents ordres des de SQL*Plus:</p>
    <pre>
  SQL> show sga;
  SQL> show parameter sga;
  
  SQL> show parameter pga;
    </pre>
  
    <h3> Relació amb la base de dades (BBDD)</h3>
    <p>
      Una instància sempre està associada a una base de dades (BBDD) concreta. Quan s’inicia la instància, es carrega la informació necessària per gestionar aquesta BBDD.
    </p>
    <ul>
      <li> Una instància ⇄ una base de dades muntada (normalment una CDB)</li> 
      <li>⚠️ Si no s’inicia l’instància, no es pot accedir a la base de dades</li>
    </ul>
  
    <h3> Diagrama conceptual</h3>
    <pre>
  [ Usuari ] → [ PGA ]
               |
               ↓
  [ Instància Oracle ]
     ├── SGA
     ├── Processos background (DBWn, LGWR, CKPT, etc.)
     ↓
  [ Fitxers de la base de dades (BBDD) ]
    </pre>
  
    <h3> Notes tècniques</h3>
    <ul>
      <li> Una mateixa màquina pot tindre diverses instàncies (una per SID)</li>
      <li> És possible connectar-se a una instància sense obrir la base de dades (per manteniment)</li>
      <li> La instància i la base de dades estan lligades però són components separats</li>
    </ul>
  
    <p><strong>Conclusió:</strong> Sense instància, la base de dades no pot operar. I sense base de dades, la instància no té sentit.</p>
  </section>
  

 

  <section id="arquitectura">
    <h2>Arquitectura d’Oracle</h2>
  
    <h3> Arquitectura tradicional (non-CDB)</h3>
    <img src="imgs/bdnoncdb.png" class="imatge-esquerra"  alt="BD non cdb" style="width: 8%">
    <p>
      Abans de la versió 12c, Oracle utilitzava una arquitectura tradicional on una instància del SGBD controlava una única base de dades (una sola estructura de fitxers).
    </p>
    <ul>
      <li> Cada instància ↔ una única BBDD</li>
      <li> Sense contenidors ni BBDD “pluggable”</li>
      <li> Més senzill però menys flexible</li>
    </ul>
  
    <h3> Arquitectura multitenant (CDB/PDB)</h3>
    <img src="imgs/bdmultit.png" class="imatge-esquerra"  alt="BD non cdb" style="width: 18%">
    <p>A partir d’Oracle 12c, es va introduir l’<strong>arquitectura multitenant</strong>:</p>
    <ul>
      <li><strong>CDB</strong> (Container Database): base de dades contenedora</li>
      <li><strong>PDB</strong> (Pluggable Database): bases de dades encapsulades dins d’una CDB</li>
    </ul>
  
    <p>Exemple d’una estructura multitenant:</p>
    <pre>
  CDB$ROOT       → Contenidor principal
  PDB$SEED       → Plantilla de clonació de PDBs
  PDB1, PDB2...  → Pluggable Databases (útils per treballar)
    </pre>
  
    <h3>Arquitectura multitenant (en un SGBD)</h3>
    <img src="imgs/variosmultit.png" class="imatge-dreta"  alt="BD non cdb" style="width: 40%">
    <ul>
      <li>Un SGBD d’ORACLE pot gestionar diversos contenidors (CDBs)</li>
      <li>Cada contenidor es una BBDD / <strong>Instància</strong> diferent</li>
      <li>Cada contenidor pot tindre dins diferents PDBs</li>
    </ul>

    <h3> Notes importants sobre multitenant</h3>
    <ul>
      <li> Es poden tindre diverses PDBs funcionant en paral·lel dins d’una mateixa CDB</li>
      <li> Permet millorar l’escalabilitat, la seguretat i el manteniment</li>
      <li>⚠️ A partir de la versió <strong>Oracle 21c</strong>, només es permet l’arquitectura multitenant</li>
    </ul>
  
    <h3> Diferències entre arquitectures</h3>
    <table border="1" cellpadding="8" style="border-collapse: collapse; margin-top: 10px;">
      <thead>
        <tr style="background-color: #f0f4f8;">
          <th>Característica</th>
          <th>Traditional (non-CDB)</th>
          <th>Multitenant (CDB/PDB)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Instància ↔ BBDD</td>
          <td>1 ↔ 1</td>
          <td>1 ↔ múltiples PDBs</td>
        </tr>
        <tr>
          <td>Separació lògica</td>
          <td>No</td>
          <td>Sí (cada PDB és independent)</td>
        </tr>
        <tr>
          <td>Compatibilitat amb 21c</td>
          <td>❌</td>
          <td>✅ Obligatòria</td>
        </tr>
      </tbody>
    </table>
  
    <h3> Beneficis de l’arquitectura multitenant</h3>
    <ul>
      <li> Millor gestió de recursos</li>
      <li> Més fàcil de clonar, fer backups i upgrades</li>
      <li> Reducció del cost de manteniment</li>
      <li> Ideal per a entorns cloud i consolidació</li>
    </ul>
  
    <h3> Resum</h3>
    <ul>
      <li> L’arquitectura multitenant és l’estàndard actual</li>
      <li> Cada PDB és com una base de dades separada, però comparteixen instància amb la CDB</li>
      <li> L’arquitectura tradicional ja no és vàlida per a noves versions</li>
    </ul>
  </section>
  



  <section id="ofa">
    <h2>OFA – Oracle Flexible Architecture</h2>
  
    <h3> Què és l’OFA?</h3>
    <p>
      L’<strong>OFA (Oracle Flexible Architecture)</strong> és un estàndard de disseny de l'estructura de directoris i nomenclatura de fitxers en instal·lacions Oracle. 
      Està pensat per a:
    </p>
    <ul>
      <li> Organitzar eficientment grans volums de dades i software</li>
      <li> Facilitar l’administració i manteniment</li>
      <li> Millorar el rendiment</li>
      <li> Permetre gestionar múltiples bases de dades en un mateix sistema</li>
    </ul>
  
    <h3>📁 Exemples de rutes segons el sistema operatiu</h3>
  
    <p><strong>🖥️ En Windows:</strong></p>
    <pre>C:\app\oracle\product\21.0.0\dbhome_1</pre>
  
    <p><strong>🐧 En Unix/Linux:</strong></p>
    <pre>/u01/app/oracle/product/21.0.0/dbhome_1</pre>
  
    <p>On:</p>
    <ul>
      <li><code>/u01</code> és el punt de muntatge principal</li>
      <li><code>oracle</code> és el nom de l’usuari que instal·la</li>
      <li><code>product</code> conté diferents versions del software</li>
      <li><code>21.0.0</code> és la versió instal·lada</li>
    </ul>
  
    <h3>👤 L’usuari instal·lador</h3>
    <p>
      El directori <code>oracle</code> fa referència normalment a l’usuari del sistema operatiu que executa la instal·lació. Aquest usuari ha de tindre permisos d’administrador en Windows o pertànyer al grup <code>oinstall</code> i <code>dba</code> en Linux.
    </p>
  
    <h3>⚠️ Recomanacions</h3>
    <ul>
      <li> No instal·lar Oracle directament a <code>C:\</code> o <code>/</code>. Usa rutes separades com <code>/u01</code> per mantenir-ho organitzat.</li>
      <li> Usa el mateix esquema per a totes les versions i entorns (dev, test, prod).</li>
      <li> No modificar l’estructura creada automàticament per Oracle.</li>
    </ul>
  
    <h3>🔗 Recursos addicionals</h3>
    <p>
      Pots consultar més informació sobre OFA als següents enllaços:
      <ul>
        <li><a href="https://orlandoolguin.wordpress.com/2010/08/23/que-es-la-ofa/" target="_blank">Què és l’OFA? (Orlando Olguin)</a></li>
        <li><a href="https://docs.oracle.com" target="_blank">Documentació oficial Oracle</a></li>
      </ul>
    </p>
  </section>
  
 

  <section id="instalacio">
    <h2>Instal·lació Oracle</h2>
  
    <h3>Procés general d’instal·lació</h3>
    <p>Instal·lar un SGBD Oracle i crear una BBDD (CDB + PDB) són processos diferents, encara que el mateix assistent pot fer-ho tot alhora.</p>
  
    <h3>Des de Windows</h3>
    <img src="imgs/icosetup.png" class="imatge-esquerra"  alt="BD non cdb" style="width: 10%">
    <ul>
      <li>Es fa servir un <strong>executable (setup.exe)</strong> que guia la instal·lació del software.</li>
      <li>Abans d’executar <code>setup.exe</code>, cal <strong>crear usuaris al sistema operatiu</strong>:</li>
      <ul>
        <li>Exemple:
          <ul>
            <li><code>admin</code>: usuari principal (amb permisos d'administrador)</li>
            <li><code>oracle</code>: usuari per executar la instal·lació (també amb permisos d'administrador)</li>
            <li><code>usuari1</code>: usuari sense permisos</li>
          </ul>
        </li>
      </ul>
      <li>És important executar el setup amb l’usuari <strong>oracle</strong> des de CMD amb permisos d'administrador.</li>
    </ul>
    <p>(no cal que l'usuari instal·lador s'anomene <strong>oracle</strong>, pot ser altre nom)</p>
  
    <h3>Opcions de setup</h3>
    <p>Durant l’execució de <code>setup.exe</code> es poden escollir diferents opcions:</p>
    <ul>
      <li><strong>Instal·lació només del software:</strong> és l'opció recomanada. Es fa servir després <code>dbca</code> per crear la base de dades.</li>
      <li><strong>Instal·lació del software amb creació de CDB + PDB :</strong> no és l’opció que utilitzarem.</li>
    </ul>
    <p class="alert"> ⚠️ No executar <code>setup.exe</code> més d’una vegada!</p>
  
    <h3>Creació de la base de dades (CDB + PDB)</h3> 
    <ul>
      <li>Es fa amb l’eina <code>dbca</code> (Database Configuration Assistant).</li>
      <li>Executar des de CMD amb permisos d’administrador:
        <pre>C:\Windows\system32> dbca</pre>
      </li>
      <li>L’usuari que fa la instal·lació passa a ser l’<strong>usuari instal·lador del SGBD</strong>.</li>
      <li>Al final del procés, es mostra la <strong>ruta del fitxer de log</strong> de la instal·lació.</li>
    </ul>
  
    <h3>Creació de més  PDB</h3>
    <p>També es fa amb <code>dbca</code>:</p>
    <ul>
      <li>CMD amb permisos d’administrador:</li>
      <pre>C:\Windows\system32> dbca</pre>
      <li>També pot executar-se com a:
        <ul>
          <li>Usuari instal·lador</li>
          <li>Usuari administrador amb credencials SYS</li>
        </ul>
      </li>
    </ul>
  
      
    <h3>Instal·lació / creacio del LISTENER</h3>
    <p>Una vegada instal·lat el SW i la BBDD , s'ha d'instal·lar el LISTENER.</p>
    <pre>C:\Windows\system32> netca</pre>
      <ul>
        <li>⚠️ El LISTENER S'ha d'instal·lar amb permisos d'<strong>administrador</strong></li>
        <li>Primer, agregar un listener</li>
        <li>Després, configurar els mètodes de nomenclatura </li>
        <ul>
          <li>nomenclatura local</li>
          <li>nomenclatura de connexió senzilla</li>
        </ul>
      </ul>

    <p><strong>Resum:</strong></p>
    <ul>
      <li>Crear usuaris S.O.</li>
      <li>Executar <code>setup.exe</code> amb usuari <code>oracle</code></li>
      <li>Seleccionar “Només instal·lació del software”</li>
      <li>Després, crear la CDB i PDB amb <code>dbca</code></li>
      <li>Després, crear noves PDB amb <code>dbca</code>, i també esborrar</li>
    </ul>

    <h3>Primera instal·lació</h3>
    <p>Una vegada es tenen tots els requisits preparats, es realitza la primera
       instal·lació d’Oracle amb l’usuari designat per a ser usuari instal·lador, per exemple  <code>oracle</code>.</p>
  </section>
  

  <section id="stop">
    <img src="imgs/stop.png" class="imatge-esquerra"  alt="stop" style="width: 6%">
    <h2>Abans de continuar.... </h2>
    <h1>Realitzem la nostra primera instal·lació d’ORACLE</h1>

  </section>



  <section id="acces">
    <h2>Accés a Oracle</h2>
    <p>Després de tindre acabada la instal·lació, hem de comprovar que es pot accedir a la instància.</p>
    <h3> Des de Windows (sqlplus)</h3>
    <p>Obrir una finestra de CMD com a <strong>usuari instal·lador</strong> i executar la ordre <code>sqlplus</code></p>
    <pre>C:\Users\oracle> sqlplus / as SYSDBA</pre>
  
    <p>Esta ordre ens connecta a la CDB principal apuntada per ORACLE_SID. Una vegada dins de SQL*Plus, 
      es poden utilitzar ordres útils:</p>
    <div class="pre-container">
      <span class="code-type">SQL</span>
      <button class="copy-button">⧉ COPIA Codi !</button>
      <pre>
  show user;
  show con_name;             -- Nom del contenidor actiu
  select name from v$database;
  show pdbs;                -- Mostra les PDB disponibles
  conn system                -- Connecta com SYSTEM
  show sga;
  disc;                      -- Desconnecta
  exit;
     </pre>
  </div>
   <p>Les ordres SHOW PDBS, SHOW USER,  són instruccions especials de l'entorn SQL*Plus (
    o eines compatibles com SQLcl), no formen part de SQL estàndard ni de PL/SQL.
  La ordre SELECT si és una ordre SQL</p>
  <pre>
Les ordres sqlplus solen ser ALIAS de consultes SQL. 
Per exemple SHOW PDBS es pot fer amb:
SELECT CON_ID, NAME, OPEN_MODE, RESTRICTED FROM V$PDBS; 
SELECT * FROM DBA_PDBS;     </pre>
  
    <h3>🔁 Connexió directa a una PDB</h3>
    <pre>
  C:\Users\oracle> sqlplus /@localhost/NOMPDB as SYSDBA
  
  SQL> show user;
  SQL> show con_name;
  SQL> show pdbs;
  SQL> select name, open_mode from v$pdbs;
    </pre>
  
    <p>També es pot connectar com SYSTEM amb contrasenya:</p>
    <pre>
  SQL> conn system/1234@localhost/NOMPDB
  SQL> show sga;
  SQL> show user;
    </pre>
    <p>⚠️ SYS i SYSTEM són usuaris diferents</p>
  
    <h3>🔄 Canvi de contenidor</h3>
    <p>Per passar d’una CDB a una PDB, o viceversa:</p>
    <pre>
  SQL> alter session set container=NOMPDB;
  SQL> show con_name;
  SQL> alter session set container=CDB$ROOT;
    </pre>
  
    <h3>🐧 Des de Linux</h3>
    <p>Des de terminal amb usuari <code>oracle</code>:</p>
    <pre>
  $ . oraenv                  # Carrega l'entorn Oracle
  $ lsnrctl start             # Inicia el listener
  $ sqlplus / as SYSDBA       # Connexió com SYS
    </pre>
  
    <p>Una vegada dins:</p>
    <div class="pre-container">
      <span class="code-type">SQL</span>
      <div class="copy-button">⧉ COPIA Codi</div>
    <pre>
   startup;
   show con_name;
   show pdbs;
   alter session set container=NOM_PDB;
   conn system;
   disc;      </pre>
    </div>
  
    <h3>⚠️ Consideracions importants</h3>
    <ul>
      <li> Només l’usuari que ha fet la instal·lació pot entrar com <code>SYSDBA</code> sense contrasenya.</li>
      <li> Si les variables d’entorn no estan carregades (en Linux <code>'. oraenv'</code>), no es podrà iniciar <code>sqlplus</code> correctament.</li>
      <li> <strong>CON_ID=1</strong> representa la CDB, però no sempre es mostra amb <code>show pdbs</code>.</li>
    </ul>
  
    <h3> Què és SQL*Plus?</h3>
    <p>És un client per línia d’ordres proporcionat per ORACLE que permet executar SQL, PL/SQL i ordres específiques d'sqlplus. 
      És una de les eines més antigues i utilitzades per administradors i desenvolupadors.
    </p>
    <ul>
      <li> Ideal per fer proves ràpides i administració local</li>
      <li> Permet connectar localment o remotament</li>
      <li> Permet executar scripts</li>
    </ul>
    <p>Es poden obrir múltiples finestres de <code>CMD + sqlplus</code> i cada una tindrà una sessió diferent.</p>
  
    <pre>
  SQL> help index
  SQL> help show
    </pre>

    <h3> Altres maneres d'accedir a la instància:</h3>
    <ul>
      <li> Utilitzant SQL Developer</li>
      <li> Utilitzant  Visual Studio Code + Extensió SQL Developer</li>
      <li> Utilitzant DBeaver ( multi-SGBD sw lliure)</li>
      <li> Utilitzant TOAD  (multi-SGBD propietari)</li>
      <li> Utilitzant SQLcl</li>
      <li> Utilitzant ORDS</li>  
    </ul>
    <p>En cada solució, es posible que les connexions es preparen de forma diferent
    En SQL Developer, cal afegir primer una connexió, configurar-la, guardar-la, 
      i després, queda gravada. Cuan es vol connectar, sols es fa doble-click a sobre, 
      i s'inicia la connexió. En VSCode, DBaver, TOAD, funciona igual</p>  

  </section>
  

  <section id="pdb">
    <h2>Creació de PDB manualment</h2>
  
    <h3> Informació general</h3>
    <p>
      Les <strong>PDBs</strong> (Pluggable Databases) es poden crear de forma manual mitjançant SQL des de l’usuari <code>SYS</code>, sempre connectat a la <strong>CDB</strong> (no des d’una altra PDB!).
    </p>
    <p>
      Aquesta opció ofereix més control sobre noms, ubicacions, contrasenyes i configuració de la base de dades.
      Permet integrar-ho en scripts i automatitzar la creació de PDBs, 
      sent ideal per entorns de desenvolupament, testing o desplegaments massius.
    </p>
    <p>El codi es pot posar dins un .sql i executar-lo des de sqlplus, com per exemple:</p>
    <pre>sqlplus sys/password@CDB1 as sysdba @create_pdb.sql     </pre>
  
    <h3> Creació manual d’una PDB en Windows</h3>
    <p>Des d’una sessió SQL*Plus amb l’usuari <code>SYS</code> dins la CDB:</p>
    <div class="pre-container">
      <span class="code-type">SQL</span>
      <button class="copy-button">Copia Codi !</button>
      <pre>
        CREATE PLUGGABLE DATABASE nom_pdb 
        ADMIN USER pdbadmin1 IDENTIFIED BY 1234 
        ROLES = (dba)
        DEFAULT TABLESPACE users;
     </pre>
  </div>    
      
    <p>⚠️ Si no s’indica <code>DEFAULT TABLESPACE</code>, la PDB no tindrà un espai per defecte per als usuaris.</p>
  
    <h4>🗑️ Esborrar una PDB (Windows):</h4>
    <pre>
  SQL> ALTER PLUGGABLE DATABASE pdb_manual CLOSE IMMEDIATE;
  SQL> DROP PLUGGABLE DATABASE pdb_manual INCLUDING DATAFILES;
    </pre>
  
    <h3>🐧 Creació manual d’una PDB en Linux</h3>
    <p>
      Des de <code>sqlplus</code> com <code>SYS</code> i dins la CDB, podem crear la PDB indicant els fitxers exactes i rutes:
    </p>
    <pre>
  SQL> CREATE PLUGGABLE DATABASE datapdb 
  ADMIN USER pdbadmin1 IDENTIFIED BY 1234 
  ROLES = (dba) 
  PATH_PREFIX = '/opt/oracle/oradata/ORCLCDB/DATAPDB/'
  FILE_NAME_CONVERT = (
    '/opt/oracle/oradata/ORCLCDB/pdbseed/',
    '/opt/oracle/oradata/ORCLCDB/DATAPDB/'
  )
  DEFAULT TABLESPACE users 
  DATAFILE '/opt/oracle/oradata/DATAPDB/users01.dbf' AUTOEXTEND ON;
    </pre>
  
    <h4> Notes útils:</h4>
    <ul>
      <li> Pots consultar on es troben els fitxers de dades amb:</li>
      <pre>SQL> SELECT name FROM v$datafile;</pre>
      <li> <code>PATH_PREFIX</code> ajuda a identificar la ruta base de la nova PDB</li>
      <li> <code>FILE_NAME_CONVERT</code> copia i adapta fitxers del PDB$SEED</li>
    </ul>
  
    <h4>🗑️ Esborrar una PDB (Linux):</h4>
    <pre>
  SQL> ALTER PLUGGABLE DATABASE pdb_manual CLOSE IMMEDIATE;
  SQL> DROP PLUGGABLE DATABASE pdb_manual INCLUDING DATAFILES;
    </pre>
  
    <h3> Recomanacions finals</h3>
    <ul>
      <li> Comprova que estàs connectat a la CDB abans de crear la PDB</li>
      <li> Comprova les rutes i permisos del sistema de fitxers si treballes en Linux</li>
      <li>⚠️ Assegura’t de tindre <code>DB_CREATE_FILE_DEST</code> o <code>FILE_NAME_CONVERT</code> correctament configurat</li>
    </ul>
  </section>
  

  <section id="conclusions">
    <h2>Conclusions</h2>
  
    <p>Una vegada finalitzada aquesta unitat, hauràs adquirit coneixements essencials sobre la instal·lació i administració bàsica d’Oracle Database. A continuació es resumeixen els punts clau assolits:</p>
  
    <h3> Versions i edicions</h3>
    <ul>
      <li> Identificar la <strong>versió i edició</strong> d’Oracle que s’ha d’instal·lar segons el context</li>
      <li> Diferenciar entre les edicions <em>XE, SE, EE</em> i les versions <em>11g, 12c, 19c, 21c...</em></li>
    </ul>
  
    <h3> Requisits i preparació</h3>
    <ul>
      <li> Conèixer els <strong>requisits mínims i realistes</strong> per a cada sistema operatiu</li>
      <li> Saber quins <strong>components i eines</strong> formen part de la instal·lació</li>
    </ul>
  
    <h3> Arquitectura i instància</h3>
    <ul>
      <li> Diferenciar entre <strong>BBDD, CDB, PDB, Instància, SGA i PGA</strong></li>
      <li> Entendre l’arquitectura multitenant i la seva obligació a partir d’Oracle 21c</li>
      <li> Utilitzar l’<strong>estàndard OFA</strong> per a estructurar les carpetes</li>
    </ul>
  
    <h3> Instal·lació del SGBD</h3>
    <ul>
      <li> Instal·lar el <strong>software Oracle</strong> amb <code>setup.exe</code> o <code>runInstaller</code></li>
      <li> Crear una <strong>CDB i PDB</strong> amb l’eina <code>dbca</code></li>
      <li> Crear manualment PDBs o CDBs des de línia d'ordres</li>
      <li> Coneixement dels permisos necessaris segons el rol de l’usuari (admin, oracle...)</li>
    </ul>
  
    <h3> Connexió i accés</h3>
    <ul>
      <li> Connectar-se a una instància Oracle amb <strong>SQL*Plus</strong> i <strong>SQL Developer</strong></li>
      <li> Saber com accedir a una CDB o una PDB com <code>SYS</code> o <code>SYSTEM</code></li>
      <li> Consultar l’estat de les PDBs i realitzar canvis de contenidor</li>
    </ul>
  
    <h3> Eines i clients</h3>
    <ul>
      <li> Utilitzar clients com:
        <ul>
          <li><strong>SQL*Plus / SQL Developer / SQLcl </strong></li>
          
          <li><strong>DBeaver / TOAD</strong></li>
          <li><strong>ORDS</strong>, i <strong>VSCode</strong> amb extensions</li>
        </ul>
      </li>
      <li> Crear i configurar <strong>listeners</strong> amb <code>netca</code> i comprovar connexions</li>
    </ul>
  
    <h3> Altres competències</h3>
    <ul>
      <li> Diferenciar entre <strong>Datawarehouse, RAC i base de dades d’instància única</strong></li>
      <li> Localitzar fitxers principals: datafiles, logs, arxius de configuració</li>
      <li> Comprendre el <strong>rol de l’usuari instal·lador</strong> i els permisos associats</li>
    </ul>
  
    <p>🎓 Amb tots aquests coneixements, ja estàs preparat/ada per començar a treballar amb Oracle Database a nivell bàsic-mitjà!</p>
  </section>
  

  <section id="altres-recursos">
    <h2>CDB i PDBs</h2>
       <a href="https://github.com/EnriqueIborra/ASGBD/blob/03132b3f2c7c697f70e54ab7f9495aac08c0d610/UD1/ASGBD-UD1.2%20DB-CDB%20i%20PDB_v2.pdf" target="_blank">CDB i PDBs</a> 
    <h2>Ordres bàsiques i primers errors</h2>
    <a href="https://github.com/EnriqueIborra/ASGBD/blob/2d8f9600385cfd520c1043e79bde7b7c9401f64b/UD1/ASGBD-UD1.3%20Ordres%20basiques%20i%20primers%20errors.pdf" target="_blank">Ordres bàsiques i primers errors</a>
  </section>


</main>

<script>

  // Per poder copiar codi en el porta-retalls. S'ha de posar un botó en cada <pre>
      //  <div class="pre-container">
      //    <button class="copy-button">Copia Codi !</button>
  document.addEventListener('DOMContentLoaded', function () {
    const buttons = document.querySelectorAll('.copy-button');

    buttons.forEach(button => {
      button.addEventListener('click', function () {
        const code = this.nextElementSibling.innerText;
        navigator.clipboard.writeText(code).then(() => {
          this.innerText = ' ✔ Copiat!';
          setTimeout(() => this.innerText = 'Copia Codi !', 3000);
        });
      });
    });
  });

</script>

</body>
</html>
